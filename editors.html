<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DecodeXMarket - Reel Slides Generator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ===== CSS RESET & VARIABLES ===== */
        :root {
            --primary: #10b981;
            --secondary: #059669;
            --accent: #f43f5e;
            --warning: #f39c12;
            --dark: #0f172a;
            --darker: #0a1120;
            --light: #ecf0f1;
            --gray: #94a3b8;
            --border: #1e293b;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Roboto', 'Arial', sans-serif;
        }

        body {
            background: linear-gradient(135deg, var(--dark) 0%, var(--darker) 100%);
            color: var(--light);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        /* ===== REEL SLIDE PREVIEW ===== */
        .slide-preview-container {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .slide-preview-box {
            width: 337.5px; /* 9:16 ratio for reel */
            height: 600px;
            background: linear-gradient(145deg, #0d1525, #111a2d);
            border-radius: 18px;
            border: 3px solid var(--primary);
            padding: 20px;
            display: flex;
            flex-direction: column;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
            position: relative;
            overflow: hidden;
        }

        /* Logo at top centered */
        .slide-logo {
            text-align: center;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 15px;
        }

        .logo-text {
            color: var(--primary);
            font-size: 28px;
            font-weight: 900;
            letter-spacing: -0.5px;
            text-shadow: 0 0 15px rgba(16, 185, 129, 0.3);
        }

        /* Slide content area */
        .slide-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 10px;
            overflow: hidden;
            width: 100%;
        }

        /* Slide specific styles */
        .emoji-large {
            font-size: 100px;
            margin-bottom: 30px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .date-display {
            color: var(--primary);
            font-size: 26px;
            font-weight: 800;
            margin-bottom: 15px;
            text-transform: uppercase;
        }

        .day-display {
            color: var(--gray);
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 30px;
        }

        /* Prediction box - dynamic size */
        .prediction-container {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .prediction-title {
            color: var(--warning);
            font-size: 22px;
            font-weight: 800;
            margin-bottom: 5px;
        }

        .prediction-box {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.2) 0%, rgba(5, 150, 105, 0.2) 100%);
            border: 2px solid var(--primary);
            border-radius: 15px;
            padding: 20px;
            width: 100%;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            transition: all 0.3s ease;
        }

        .prediction-text {
            font-size: 24px;
            font-weight: 900;
            color: white;
            text-shadow: 0 0 10px rgba(16, 185, 129, 0.5);
            line-height: 1.3;
            word-wrap: break-word;
            max-width: 100%;
        }

        /* Levels slide */
        .levels-title {
            color: white;
            font-size: 28px;
            font-weight: 900;
            margin-bottom: 30px;
            text-align: center;
        }

        .levels-container {
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .level-section {
            width: 100%;
        }

        .section-heading {
            font-size: 20px;
            font-weight: 800;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .resistance-heading {
            color: var(--accent);
        }

        .support-heading {
            color: var(--primary);
        }

        .level-values {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: center;
        }

        .level-value {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 12px 15px;
            font-size: 18px;
            font-weight: 700;
            min-width: 80px;
            text-align: center;
            border: 1px solid;
        }

        .resistance-value {
            border-color: var(--accent);
            color: #ff6b8b;
        }

        .support-value {
            border-color: var(--primary);
            color: #34d399;
        }

        /* Reversal timings */
        .reversal-list {
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: 15px;
            padding: 10px;
        }

        .reversal-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            border-left: 4px solid var(--warning);
        }

        .clock-emoji {
            font-size: 24px;
        }

        .reversal-time {
            font-size: 20px;
            font-weight: 700;
            color: white;
        }

        .reversal-desc {
            font-size: 14px;
            color: var(--gray);
            margin-left: auto;
        }

        /* Branding slide */
        .brand-title {
            font-size: 42px;
            font-weight: 900;
            color: var(--primary);
            margin-bottom: 10px;
            text-align: center;
            line-height: 1.2;
        }

        .brand-subtitle {
            font-size: 22px;
            color: var(--gray);
            margin-bottom: 40px;
            text-align: center;
            font-weight: 600;
        }

        .data-points {
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 20px;
        }

        .data-item {
            background: rgba(16, 185, 129, 0.1);
            border-radius: 10px;
            padding: 15px;
            font-size: 18px;
            font-weight: 600;
            text-align: center;
            border: 1px solid rgba(16, 185, 129, 0.3);
        }

        /* Disclaimer slide */
        .disclaimer-content {
            width: 100%;
            padding: 20px;
            background: rgba(244, 63, 94, 0.1);
            border-radius: 15px;
            border: 1px solid rgba(244, 63, 94, 0.3);
        }

        .disclaimer-title {
            color: var(--accent);
            font-size: 28px;
            font-weight: 900;
            margin-bottom: 20px;
            text-align: center;
        }

        .disclaimer-points {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .disclaimer-point {
            font-size: 16px;
            color: white;
            padding-left: 20px;
            position: relative;
            line-height: 1.4;
        }

        .disclaimer-point:before {
            content: "‚Ä¢";
            color: var(--accent);
            font-size: 20px;
            position: absolute;
            left: 0;
            top: 0;
        }

        /* Footer - Note on all slides */
        .slide-footer {
            text-align: center;
            padding-top: 15px;
            margin-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 11px;
            color: var(--accent);
            font-weight: 600;
        }

        /* Controls */
        .controls {
            display: flex;
            gap: 12px;
            margin-top: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .control-btn {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 6px 15px rgba(16, 185, 129, 0.3);
        }

        .control-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(16, 185, 129, 0.4);
        }

        .control-btn.secondary {
            background: linear-gradient(135deg, #4b5563 0%, #374151 100%);
        }

        .control-btn.slides {
            background: linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%);
        }

        .control-btn.download-all {
            background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%);
        }

        /* Slide selector */
        .slide-selector {
            display: flex;
            gap: 8px;
            margin-top: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .slide-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid var(--border);
            border-radius: 8px;
            padding: 10px 15px;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
            font-weight: 600;
            min-width: 120px;
            text-align: center;
        }

        .slide-btn:hover {
            background: rgba(16, 185, 129, 0.2);
            border-color: var(--primary);
        }

        .slide-btn.active {
            background: rgba(16, 185, 129, 0.3);
            border-color: var(--primary);
            color: var(--primary);
        }

        /* Processing Modal */
        .processing-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 10000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(10px);
        }

        .processing-content {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            border-radius: 20px;
            padding: 40px;
            width: 90%;
            max-width: 500px;
            border: 3px solid var(--primary);
            text-align: center;
        }

        .processing-spinner {
            width: 60px;
            height: 60px;
            border: 5px solid rgba(255, 255, 255, 0.1);
            border-top-color: var(--primary);
            border-radius: 50%;
            margin: 20px auto;
            animation: spin 1s linear infinite;
        }

        .processing-text {
            color: white;
            font-size: 18px;
            margin: 20px 0;
            font-weight: 600;
        }

        .progress-container {
            width: 100%;
            height: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            margin: 25px 0;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            width: 0%;
            transition: width 0.3s;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 15px;
            right: 15px;
            background: var(--primary);
            color: white;
            padding: 10px 16px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            z-index: 1000;
            animation: slideIn 0.3s ease;
            font-weight: 600;
            font-size: 13px;
            max-width: 300px;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .slide-preview-box {
                width: 90vw;
                height: 160vw;
            }
            
            .controls {
                flex-direction: column;
                width: 90vw;
            }
            
            .control-btn {
                width: 100%;
                justify-content: center;
            }
            
            .slide-selector {
                overflow-x: auto;
                justify-content: flex-start;
                padding-bottom: 10px;
            }
            
            .slide-btn {
                min-width: 100px;
                font-size: 12px;
                padding: 8px 12px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 style="color: var(--primary); text-align: center; margin-bottom: 5px; font-size: 24px;">
            <i class="fas fa-film"></i> DecodeXMarket Reel Slides Generator
        </h1>
        <p style="color: var(--gray); text-align: center; margin-bottom: 15px; font-size: 14px;">
            9:16 Instagram Reel Format ‚Ä¢ All Slides Redesigned
        </p>

        <!-- Slide Preview -->
        <div class="slide-preview-container">
            <div class="slide-preview-box" id="slidePreview">
                <!-- Logo will be added by JavaScript -->
                <!-- Content will be filled by JavaScript -->
                <!-- Footer will be added by JavaScript -->
            </div>
            
            <!-- Slide Selector -->
            <div class="slide-selector">
                <button class="slide-btn active" onclick="showSlide(1)">Slide 1: Hook</button>
                <button class="slide-btn" onclick="showSlide(2)">Slide 2: Prediction</button>
                <button class="slide-btn" onclick="showSlide(3)">Slide 3: Levels</button>
                <button class="slide-btn" onclick="showSlide(4)">Slide 4: Timings</button>
                <button class="slide-btn" onclick="showSlide(5)">Slide 5: Branding</button>
                <button class="slide-btn" onclick="showSlide(6)">Slide 6: Disclaimer</button>
            </div>
        </div>

        <!-- Controls -->
        <div class="controls">
            <button class="control-btn" onclick="downloadCurrentSlide()">
                <i class="fas fa-download"></i> Download This Slide
            </button>
            <button class="control-btn slides" onclick="downloadAllSlides()">
                <i class="fas fa-layer-group"></i> Download All 6 Slides
            </button>
            <button class="control-btn secondary" onclick="refreshSlides()">
                <i class="fas fa-sync-alt"></i> Refresh Slides
            </button>
        </div>

        <p style="color: var(--gray); text-align: center; margin-top: 10px; font-size: 12px;">
            <i class="fas fa-info-circle"></i> All slides include logo, footer note, and fit perfectly in 9:16 reel format
        </p>
    </div>

    <!-- Processing Modal -->
    <div class="processing-modal" id="processingModal">
        <div class="processing-content">
            <h2 style="color: var(--primary); margin-bottom: 20px;">
                <i class="fas fa-spinner"></i> Generating Slides
            </h2>
            <div class="processing-spinner"></div>
            <div class="processing-text" id="processingText">Preparing slides...</div>
            <div class="progress-container">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            <div style="color: var(--gray); font-size: 14px; margin-top: 20px;">
                <span id="currentSlide">Slide 1 of 6</span>
            </div>
        </div>
    </div>

    <!-- JAVASCRIPT -->
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script>
        // Data configuration
        const MARKET_SHEET_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQgqBUGz6xFmT2Pd5qdvTZGYm3H3d-KgZlL65PHanPKDz3b9mp1rx7ZQNlV8BUJnYY0nfk-jyYvjWNY/pub?gid=658749771&single=true&output=csv";
        
        // Sample data fallback
        const sampleData = {
            date: "Thursday, 25 January 2024",
            tomorrowDate: "Friday, 26 January 2024",
            prediction: "Market May Go Up",
            resistance: ["25128", "25208", "25288", "25367", "25447"],
            support: ["24800", "24720", "24640", "24560", "24480"],
            reversalTimes: ["10:30 AM", "11:45 AM", "1:15 PM", "2:30 PM"]
        };

        // Current slide state
        let currentSlide = 1;
        let marketData = { ...sampleData };

        // On page load
        document.addEventListener('DOMContentLoaded', () => {
            fetchData();
            showSlide(1);
        });

        // Fetch data from Google Sheets
        async function fetchData() {
            try {
                const response = await fetch(MARKET_SHEET_URL);
                if (!response.ok) throw new Error('Network error');
                
                const csvText = await response.text();
                const rows = parseCSV(csvText);
                
                if (rows.length > 0) {
                    updateMarketData(rows);
                    showNotification('Market data loaded!', 'success');
                }
            } catch (error) {
                console.error('Error fetching data:', error);
                showNotification('Using sample data', 'warning');
            }
        }

        // Parse CSV
        function parseCSV(csvText) {
            const rows = [];
            const lines = csvText.split('\n');
            
            lines.forEach(line => {
                if (line.trim()) {
                    const row = [];
                    let inQuotes = false;
                    let currentValue = '';
                    
                    for (let i = 0; i < line.length; i++) {
                        const char = line[i];
                        const nextChar = line[i + 1];
                        
                        if (char === '"' && inQuotes && nextChar === '"') {
                            currentValue += '"';
                            i++;
                        } else if (char === '"') {
                            inQuotes = !inQuotes;
                        } else if (char === ',' && !inQuotes) {
                            row.push(currentValue);
                            currentValue = '';
                        } else {
                            currentValue += char;
                        }
                    }
                    
                    row.push(currentValue);
                    rows.push(row);
                }
            });
            
            return rows;
        }

        // Update market data
        function updateMarketData(rows) {
            // Get tomorrow's date (if image shows 29-Jan-2026, use 30-Jan-2026)
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            
            const dayNames = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
            const monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
            
            const dayName = dayNames[tomorrow.getDay()];
            const dateStr = `${tomorrow.getDate()}-${monthNames[tomorrow.getMonth()]}-${tomorrow.getFullYear()}`;
            
            marketData.tomorrowDate = `${dayName}, ${dateStr}`;
            
            // Prediction
            if (rows[0] && (rows[0][3] || rows[0][4])) {
                marketData.prediction = (rows[0][3] || rows[0][4]).trim();
            }
            
            // Support & Resistance Levels (first 5 from rows 13-17)
            if (rows.length >= 18) {
                marketData.resistance = [];
                marketData.support = [];
                
                for (let i = 13; i < 18; i++) {
                    if (rows[i] && rows[i][1]) marketData.resistance.push(rows[i][1]);
                    if (rows[i] && rows[i][0]) marketData.support.push(rows[i][0]);
                }
            }
            
            // Show updated slide
            showSlide(currentSlide);
        }

        // Show specific slide
        function showSlide(slideNumber) {
            currentSlide = slideNumber;
            
            // Update active button
            document.querySelectorAll('.slide-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelectorAll('.slide-btn')[slideNumber - 1].classList.add('active');
            
            // Clear preview
            const preview = document.getElementById('slidePreview');
            preview.innerHTML = '';
            
            // Add logo to all slides
            const logo = document.createElement('div');
            logo.className = 'slide-logo';
            logo.innerHTML = `<div class="logo-text">DECODEX</div>`;
            preview.appendChild(logo);
            
            // Add content based on slide number
            const content = document.createElement('div');
            content.className = 'slide-content';
            
            switch(slideNumber) {
                case 1:
                    content.innerHTML = createSlide1();
                    break;
                case 2:
                    content.innerHTML = createSlide2();
                    break;
                case 3:
                    content.innerHTML = createSlide3();
                    break;
                case 4:
                    content.innerHTML = createSlide4();
                    break;
                case 5:
                    content.innerHTML = createSlide5();
                    break;
                case 6:
                    content.innerHTML = createSlide6();
                    break;
            }
            
            preview.appendChild(content);
            
            // Add footer to all slides
            const footer = document.createElement('div');
            footer.className = 'slide-footer';
            footer.innerHTML = 'Note: I am not SEBI registered';
            preview.appendChild(footer);
        }

        // Create Slide 1: Hook Question
        function createSlide1() {
            return `
                <div class="emoji-large">ü§î</div>
                <div class="date-display">${marketData.tomorrowDate.split(',')[1].trim()}</div>
                <div class="day-display">${marketData.tomorrowDate.split(',')[0]}</div>
                <div style="font-size: 24px; font-weight: 700; margin-bottom: 10px; color: white;">
                    Thinking about market movement?
                </div>
                <div style="font-size: 28px; font-weight: 800; color: var(--primary); margin-bottom: 20px;">
                    NIFTY TOMORROW
                </div>
                <div style="font-size: 20px; color: var(--gray); margin-top: 30px;">
                    Swipe for complete analysis ‚Üí
                </div>
            `;
        }

        // Create Slide 2: Prediction
        function createSlide2() {
            // Calculate box size based on prediction text length
            const predictionLength = marketData.prediction.length;
            let fontSize = '24px';
            let padding = '20px';
            
            if (predictionLength > 50) {
                fontSize = '20px';
                padding = '15px';
            } else if (predictionLength > 30) {
                fontSize = '22px';
                padding = '18px';
            }
            
            return `
                <div style="margin-bottom: 30px;">
                    <div style="font-size: 28px; font-weight: 800; color: var(--warning); margin-bottom: 10px;">
                        PREDICTION DECODED
                    </div>
                    <div style="font-size: 18px; color: var(--gray);">
                        Based on FII-DII Data Analysis
                    </div>
                </div>
                
                <div class="prediction-container">
                    <div class="prediction-title">Expected Move:</div>
                    <div class="prediction-box" style="padding: ${padding};">
                        <div class="prediction-text" style="font-size: ${fontSize};">
                            ${marketData.prediction}
                        </div>
                    </div>
                </div>
                
                <div style="margin-top: 40px; font-size: 16px; color: var(--gray);">
                    Institutional data suggests this direction
                </div>
            `;
        }

        // Create Slide 3: Support & Resistance Levels
        function createSlide3() {
            return `
                <div class="levels-title">NIFTY LEVELS FOR TOMORROW</div>
                
                <div class="levels-container">
                    <div class="level-section">
                        <div class="section-heading resistance-heading">
                            <i class="fas fa-arrow-up"></i> RESISTANCE LEVELS
                        </div>
                        <div class="level-values">
                            ${marketData.resistance.slice(0, 5).map(level => `
                                <div class="level-value resistance-value">${level}</div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div class="level-section">
                        <div class="section-heading support-heading">
                            <i class="fas fa-arrow-down"></i> SUPPORT LEVELS
                        </div>
                        <div class="level-values">
                            ${marketData.support.slice(0, 5).map(level => `
                                <div class="level-value support-value">${level}</div>
                            `).join('')}
                        </div>
                    </div>
                </div>
                
                <div style="margin-top: 40px; font-size: 16px; color: var(--gray); text-align: center;">
                    Trade Setup: Buy near support | Sell near resistance
                </div>
            `;
        }

        // Create Slide 4: Reversal Timings
        function createSlide4() {
            return `
                <div style="margin-bottom: 30px;">
                    <div style="font-size: 32px; font-weight: 800; color: var(--warning); margin-bottom: 10px;">
                        ‚è∞ REVERSAL TIMINGS
                    </div>
                    <div style="font-size: 18px; color: var(--gray);">
                        Expected Intraday Reversal Points
                    </div>
                </div>
                
                <div class="reversal-list">
                    ${marketData.reversalTimes.map((time, index) => `
                        <div class="reversal-item">
                            <div class="clock-emoji">‚è∞</div>
                            <div class="reversal-time">${time}</div>
                            <div class="reversal-desc">Point ${index + 1}</div>
                        </div>
                    `).join('')}
                </div>
                
                <div style="margin-top: 30px; font-size: 16px; color: var(--gray); text-align: center;">
                    Based on 15-minute chart analysis
                </div>
            `;
        }

        // Create Slide 5: Branding
        function createSlide5() {
            return `
                <div style="margin-bottom: 40px;">
                    <div class="brand-title">DecodeXMarket</div>
                    <div class="brand-subtitle">"Markets Are Random, Data Isn't"</div>
                </div>
                
                <div class="data-points">
                    <div class="data-item">FII-DII Data Decoding</div>
                    <div class="data-item">Support & Resistance Levels</div>
                    <div class="data-item">Intraday Reversal Timings</div>
                    <div class="data-item">Market Sentiment Analysis</div>
                </div>
                
                <div style="margin-top: 40px; font-size: 18px; color: var(--primary); font-weight: 700;">
                    Follow for daily insights
                </div>
                
                <div style="margin-top: 20px; font-size: 16px; color: var(--gray);">
                    @DecodeXMarket ‚Ä¢ WhatsApp: 8271890090
                </div>
            `;
        }

        // Create Slide 6: Disclaimer
        function createSlide6() {
            return `
                <div class="disclaimer-content">
                    <div class="disclaimer-title">IMPORTANT DISCLAIMER</div>
                    
                    <div class="disclaimer-points">
                        <div class="disclaimer-point">I am not SEBI registered analyst</div>
                        <div class="disclaimer-point">This is not financial advice</div>
                        <div class="disclaimer-point">Do your own research before trading</div>
                        <div class="disclaimer-point">Past performance doesn't guarantee future results</div>
                        <div class="disclaimer-point">Trading involves risk of loss</div>
                        <div class="disclaimer-point">Consult a financial advisor before investing</div>
                    </div>
                    
                    <div style="margin-top: 30px; text-align: center; font-size: 14px; color: var(--gray);">
                        For educational purposes only
                    </div>
                </div>
                
                <div style="margin-top: 30px; font-size: 16px; color: var(--gray); text-align: center;">
                    Stay safe and trade responsibly
                </div>
            `;
        }

        // Download current slide
        function downloadCurrentSlide() {
            const preview = document.getElementById('slidePreview');
            
            showNotification('Creating slide image...', 'info');
            
            html2canvas(preview, {
                scale: 3,
                backgroundColor: '#0d1525',
                useCORS: true,
                logging: false,
                width: preview.offsetWidth,
                height: preview.offsetHeight
            }).then(canvas => {
                const link = document.createElement('a');
                const dateStr = new Date().toLocaleDateString('en-IN').replace(/\//g, '-');
                link.download = `DecodeX_Slide${currentSlide}_${dateStr}.png`;
                link.href = canvas.toDataURL('image/png');
                link.click();
                
                showNotification(`Slide ${currentSlide} downloaded!`, 'success');
            }).catch(error => {
                console.error('Error:', error);
                showNotification('Download failed. Try again.', 'error');
            });
        }

        // Download all slides
        async function downloadAllSlides() {
            const modal = document.getElementById('processingModal');
            const progressBar = document.getElementById('progressBar');
            const processingText = document.getElementById('processingText');
            const currentSlideEl = document.getElementById('currentSlide');
            
            modal.style.display = 'flex';
            
            try {
                const slides = [];
                const preview = document.getElementById('slidePreview');
                
                // Store current slide
                const originalSlide = currentSlide;
                
                for (let i = 1; i <= 6; i++) {
                    // Update progress
                    const progress = Math.round((i / 6) * 100);
                    progressBar.style.width = `${progress}%`;
                    processingText.textContent = `Creating Slide ${i} of 6...`;
                    currentSlideEl.textContent = `Slide ${i} of 6`;
                    
                    // Show the slide
                    showSlide(i);
                    
                    // Wait for render
                    await new Promise(resolve => setTimeout(resolve, 500));
                    
                    // Capture canvas
                    const canvas = await html2canvas(preview, {
                        scale: 3,
                        backgroundColor: '#0d1525',
                        useCORS: true,
                        logging: false,
                        width: preview.offsetWidth,
                        height: preview.offsetHeight
                    });
                    
                    slides.push({
                        canvas: canvas,
                        number: i
                    });
                    
                    // Small delay
                    await new Promise(resolve => setTimeout(resolve, 300));
                }
                
                // Restore original slide
                showSlide(originalSlide);
                
                // Download each slide
                for (let i = 0; i < slides.length; i++) {
                    const slide = slides[i];
                    const link = document.createElement('a');
                    const dateStr = new Date().toLocaleDateString('en-IN').replace(/\//g, '-');
                    link.download = `DecodeX_Reel_Slide${slide.number}_${dateStr}.png`;
                    link.href = slide.canvas.toDataURL('image/png');
                    document.body.appendChild(link);
                    
                    // Trigger download with delay
                    setTimeout(() => {
                        link.click();
                        document.body.removeChild(link);
                    }, i * 500);
                }
                
                // Complete
                setTimeout(() => {
                    modal.style.display = 'none';
                    progressBar.style.width = '0%';
                    showNotification('All 6 reel slides downloaded! Ready for Instagram.', 'success');
                }, 3500);
                
            } catch (error) {
                console.error('Error generating slides:', error);
                modal.style.display = 'none';
                showNotification('Error generating slides. Please try individual downloads.', 'error');
            }
        }

        // Refresh slides
        function refreshSlides() {
            fetchData();
            showNotification('Slides refreshed with latest data!', 'success');
        }

        // Show notification
        function showNotification(message, type = 'success') {
            document.querySelectorAll('.notification').forEach(n => n.remove());
            
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.style.background = type === 'error' ? '#f43f5e' : 
                                          type === 'warning' ? '#f39c12' : 
                                          '#10b981';
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }
    </script>
</body>
</html>
