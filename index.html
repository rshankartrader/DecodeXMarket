<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DecodeXMarket - Trading Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ===== CSS RESET & VARIABLES ===== */
        :root {
            --primary: #10b981;
            --secondary: #059669;
            --accent: #f43f5e;
            --success: #27ae60;
            --danger: #c0392b;
            --warning: #f39c12;
            --info: #2980b9;
            --dark: #0f172a;
            --darker: #0a1120;
            --light: #ecf0f1;
            --gray: #94a3b8;
            --card-bg: rgba(255, 255, 255, 0.05);
            --border: #1e293b;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Roboto', 'Arial', sans-serif;
        }

        body {
            background: linear-gradient(135deg, var(--dark) 0%, var(--darker) 100%);
            color: var(--light);
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* ===== DATA UPDATE NOTICE ===== */
.data-update-notice {
    background: rgba(16, 185, 129, 0.08);
    border: 1px solid rgba(16, 185, 129, 0.2);
    border-radius: 8px;
    padding: 10px 15px;
    margin: 12px 0 20px 0;
    text-align: center;
    position: relative;
    backdrop-filter: blur(5px);
    line-height: 1.4;
}

.data-update-notice .notice-text {
    display: inline-block;
    color: var(--light);
    font-size: 0.9rem;
    margin: 0;
    padding: 0;
}

.data-update-notice .notice-label {
    color: var(--warning);  
    font-weight: 700;
    font-size: 0.95rem;
    display: inline;
    margin-right: 5px;
}

.data-update-notice .notice-label i {
    margin-right: 5px;
}

.update-time {
    display: inline-block;
    background: rgba(16, 185, 129, 0.15);
    padding: 3px 10px;
    border-radius: 12px;
    margin: 0 4px;
    font-weight: 700;
    color: var(--primary);
    font-size: 0.9rem;
    border: 1px solid rgba(16, 185, 129, 0.3);
}

.data-update-note {
    font-size: 0.8rem;
    color: var(--gray);
    margin-top: 8px;
    opacity: 0.8;
    font-style: italic;
    text-align: center;
}
        /* ===== UPDATED LOGIN SYSTEM ===== */
        .login-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(10px);
            z-index: 2000;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .login-box {
            background: rgba(30, 41, 59, 0.95);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 40px;
            width: 100%;
            max-width: 500px;
            backdrop-filter: blur(10px);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }

        .login-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .login-header h2 {
            color: var(--primary);
            margin-bottom: 10px;
            font-size: 2rem;
            font-weight: 900;
        }

        .login-tabs {
            display: flex;
            margin-bottom: 30px;
            border-bottom: 1px solid var(--border);
        }

        .login-tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: none;
            border: none;
            color: var(--gray);
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }

        .login-tab.active {
            color: var(--primary);
            border-bottom: 2px solid var(--primary);
        }

        .login-form {
            display: none;
        }

        .login-form.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--light);
            font-weight: 600;
        }

        .form-group input {
            width: 100%;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border);
            border-radius: 12px;
            color: var(--light);
            font-size: 1rem;
            transition: all 0.3s;
        }

        .form-group input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.2);
        }

        .login-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }

        .login-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(16, 185, 129, 0.4);
        }

        .register-note {
            text-align: center;
            margin-top: 20px;
            color: var(--gray);
            font-size: 0.9rem;
        }

        .register-link {
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
        }

        .register-link:hover {
            text-decoration: underline;
        }

        /* ===== UPDATED HEADER (NEW DESIGN) ===== */
        .header {
            width: 100%;
            background-color: var(--dark);
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            z-index: -1;
        }

        .header-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

/* Logo Section */
        .logo-section {
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            text-decoration: none;
        }

        .logo-icon {
            width: 44px;
            height: 44px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 20px rgba(5, 150, 105, 0.4);
        }

        .logo-icon i {
            color: white;
            font-size: 20px;
        }

        .logo-text {
            display: flex;
            flex-direction: column;
        }

        .logo-main {
            font-size: 20px;
            font-weight: 900;
            color: white;
            line-height: 1;
            letter-spacing: -0.5px;
        }

        .logo-sub {
            font-size: 11px;
            font-weight: 800;
            color: var(--primary);
            text-transform: uppercase;
            letter-spacing: 1px;
            line-height: 1;
            margin-top: 4px;
        }
        /* Action Buttons */
        .header-actions {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .action-button {
            width: 44px;
            height: 44px;
            border-radius: 12px;
            background-color: #1e293b;
            border: 1px solid #334155;
            color: var(--primary);
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }

        .action-button:hover {
            background-color: #334155;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .refresh-button.refreshing {
            animation: spin 1s cubic-bezier(0.4, 0, 0.2, 1) infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* User Info */
        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
            padding-left: 10px;
        }

        .user-details {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
        }

        .user-name {
            font-size: 13px;
            font-weight: 800;
            color: white;
            line-height: 1;
            max-width: 120px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .user-role {
            font-size: 10px;
            color: var(--primary);
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: -0.2px;
            margin-top: 3px;
        }

        .logout-button {
            width: 44px;
            height: 44px;
            border-radius: 12px;
            background-color: #1e293b;
            border: 1px solid #334155;
            color: var(--accent);
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }

        .logout-button:hover {
            background-color: var(--accent);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(244, 63, 94, 0.2);
        }

        /* Last Updated Time Display */
        .last-updated {
            display: flex;
            align-items: right;
            gap: 8px;
            color: var(--gray);
            font-size: 11px;
            margin-right: 100px;
        }

        .last-updated i {
            color: var(--primary);
            font-size: 14px;
        }

        #lastUpdate {
            font-weight: 600;
            color: var(--light);
            min-width: 100px;
        }

        /* Hamburger Menu Button */
        .menu-toggle {
            width: 44px;
            height: 44px;
            border-radius: 12px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            z-index: 70;
            background-color: #1e293b;
            border: 1px solid #334155;
            color: var(--gray);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            margin-left: 10px;
        }

        .menu-toggle:hover {
            background-color: #334155;
            color: white;
        }

        .menu-toggle.active {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            box-shadow: 0 0 20px rgba(5, 150, 105, 0.5);
            transform: rotate(180deg);
        }

        /* Desktop Navigation (Hidden in new design) */
        .desktop-nav {
            display: none;
        }

        .daily-update-note {
            display: none;
        }

        /* Mobile Menu */
        .mobile-menu {
            position: fixed;
            top: 70px;
            left: 0;
            right: 0;
            background-color: var(--dark);
            z-index: 65;
            overflow: hidden;
            height: 0;
            transition: height 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            border-top: 1px solid transparent;
        }

        .mobile-menu.open {
            height: calc(100vh - 70px);
            border-top: 1px solid var(--border);
        }

        .mobile-menu-container {
            padding: 0 20px;
            height: 100%;
            display: flex;
            flex-direction: column;
            opacity: 0;
            transform: translateY(-20px);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1) 0.1s;
        }

        .mobile-menu.open .mobile-menu-container {
            opacity: 1;
            transform: translateY(0);
        }

        /* Navigation Items - UPDATED AS REQUESTED */
        .nav-items {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 30px;
        }

        .nav-button {
            width: 100%;
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 18px 20px;
            border-radius: 14px;
            font-size: 17px;
            font-weight: 800;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid;
            cursor: pointer;
            background-color: rgba(30, 41, 59, 0.5);
            color: var(--gray);
            border-color: #334155;
            text-align: left;
        }

        .nav-button.active {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            border-color: var(--primary);
            box-shadow: 0 8px 25px rgba(5, 150, 105, 0.3);
            transform: translateX(5px);
        }

        .nav-button:not(.active):hover {
            background-color: #1e293b;
            color: white;
            border-color: #475569;
            transform: translateX(5px);
        }

        .nav-icon {
            width: 22px;
            height: 22px;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Mobile User Section - UPDATED AS REQUESTED */
        .mobile-user-section {
            margin-top: auto;
            padding: 20px 0 30px 0;
            background: linear-gradient(180deg, transparent 0%, rgba(15, 23, 42, 0.7) 100%);
        }

        .divider {
            height: 1px;
            background: linear-gradient(90deg, transparent 0%, #334155 50%, transparent 100%);
            width: 100%;
            margin-bottom: 25px;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1) 0.2s;
        }

        .mobile-menu.open .divider {
            opacity: 1;
            transform: translateY(0);
        }

        .user-card {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background-color: rgba(30, 41, 59, 0.9);
            padding: 20px;
            border-radius: 16px;
            border: 1px solid #334155;
            backdrop-filter: blur(10px);
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1) 0.3s;
        }

        .mobile-menu.open .user-card {
            opacity: 1;
            transform: translateY(0);
        }

        .user-card-left {
            display: flex;
            align-items: center;
            gap: 15px;
            flex: 1;
        }

        .user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
            border: 1px solid #475569;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            flex-shrink: 0;
        }

        .user-avatar i {
            font-size: 22px;
            color: var(--primary);
        }

        .user-card-info {
            flex: 1;
            min-width: 0;
        }

        .user-card-info h4 {
            color: white;
            font-weight: 900;
            font-size: 16px;
            line-height: 1.2;
            margin-bottom: 6px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .user-card-badge {
            display: inline-block;
            color: var(--primary);
            font-size: 10px;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 0.8px;
            background-color: rgba(16, 185, 129, 0.15);
            padding: 5px 10px;
            border-radius: 6px;
            border: 1px solid rgba(16, 185, 129, 0.3);
        }

        .mobile-logout-button {
            width: 50px;
            height: 50px;
            margin-left: 15px;
            background-color: rgba(244, 63, 94, 0.15);
            border: 1px solid rgba(244, 63, 94, 0.3);
            color: var(--accent);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            flex-shrink: 0;
        }

        .mobile-logout-button:hover {
            background-color: var(--accent);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(244, 63, 94, 0.2);
        }

        /* Menu Item Animations */
        .nav-button {
            opacity: 0;
            transform: translateX(-20px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .mobile-menu.open .nav-button {
            opacity: 1;
            transform: translateX(0);
        }

        .mobile-menu.open .nav-button:nth-child(1) { transition-delay: 0.1s; }
        .mobile-menu.open .nav-button:nth-child(2) { transition-delay: 0.15s; }
        .mobile-menu.open .nav-button:nth-child(3) { transition-delay: 0.2s; }
        .mobile-menu.open .nav-button:nth-child(4) { transition-delay: 0.25s; }
        .mobile-menu.open .nav-button:nth-child(5) { transition-delay: 0.3s; }
        .mobile-menu.open .nav-button:nth-child(6) { transition-delay: 0.35s; }

        /* Responsive Header */
        @media (max-width: 768px) {
            .header-container {
                padding: 0 15px;
                height: 65px;
            }

            .logo-section .refresh-button {
                width: 40px;
                height: 40px;
                margin-right: 8px;
            }

            .logo-main {
                font-size: 18px;
            }

            .logo-sub {
                font-size: 10px;
            }

            .action-button,
            .logout-button,
            .menu-toggle {
                width: 42px;
                height: 42px;
            }

            .user-name {
                max-width: 100px;
                font-size: 12px;
            }

            .last-updated {
                font-size: 11px;
                margin-right: 10px;
            }

            #lastUpdate {
                min-width: 80px;
            }

            .nav-items {
                margin-top: 20px;
            }

            .nav-button {
                padding: 16px 18px;
                font-size: 16px;
            }

            .data-update-notice {
                margin: 10px 0 15px 0;
                padding: 8px 12px;
            }
    
            .data-update-notice-content {
                gap: 6px;
            }
    
            .data-update-notice h4 {
                font-size: 0.9rem;
            }
    
            .data-update-notice p {
                font-size: 0.85rem;
            }
    
            .update-time {
                padding: 2px 8px;
               font-size: 0.84rem;
            }
  }
        @media (max-width: 480px) {
            .header-container {
                height: 60px;
            }

            .logo-text {
                display: none;
            }

            .logo-section .refresh-button {
                width: 38px;
                height: 38px;
                margin-right: 0;
            }

            .user-name {
                max-width: 80px;
                font-size: 11px;
            }

            .last-updated {
                display: none;
            }

            .action-button,
            .logout-button,
            .menu-toggle {
                width: 40px;
                height: 40px;
            }

            .mobile-menu-container {
                padding: 0 15px;
            }

            .user-avatar {
                width: 45px;
                height: 45px;
            }

            .user-card-info h4 {
                font-size: 15px;
            }

            .mobile-logout-button {
                width: 45px;
                height: 45px;
            }

            .data-update-notice {
                margin: 8px 0 12px 0;
                padding: 6px 10px;
            }
    
           .data-update-notice-content {
              gap: 4px;
              justify-content: flex-start;
           }
    
           .data-update-notice h4 {
              font-size: 0.85rem;
           }
    
           .data-update-notice p {
              font-size: 0.8rem;
           }
    
           .update-time {
              padding: 1px 6px;
              font-size: 0.8rem;
              margin: 0 3px;
           }
    
        .data-update-note {
              font-size: 0.75rem;
           }
      }
        /* ===== DATE SECTION ===== */
        .date-section {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 20px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .date-section {
                grid-template-columns: 1fr;
            }
        }

        .date-card {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(5, 150, 105, 0.1));
            border-radius: 16px;
            padding: 20px;
            border: 1px solid var(--border);
        }

        .date-card h3 {
            color: var(--primary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        #currentDate {
            font-size: 1.4rem;
            font-weight: 600;
            margin: 10px 0;
            color: var(--light);
        }

        /* ===== PREDICTION SECTION ===== */
        .prediction-card {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(5, 150, 105, 0.1));
            border-radius: 16px;
            padding: 25px;
            border: 1px solid var(--border);
            text-align: center;
        }

        .prediction-card h3 {
            color: var(--primary);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        #finalPrediction {
            font-size: 2.2rem;
            font-weight: 800;
            color: white;
            text-shadow: 0 0 20px rgba(16, 185, 129, 0.7);
            margin: 15px 0;
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .prediction-subtitle {
            color: var(--gray);
            font-size: 0.9rem;
        }

        /* ===== PREMIUM ACCESS MESSAGE ===== */
        .premium-message {
            background: linear-gradient(135deg, rgba(243, 156, 18, 0.1), rgba(231, 76, 60, 0.1));
            border: 1px solid var(--warning);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            margin: 30px 0;
        }

        .premium-message h3 {
            color: var(--warning);
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        .premium-message p {
            color: var(--light);
            margin-bottom: 20px;
            font-size: 1.1rem;
        }

        .premium-btn {
            background: linear-gradient(135deg, var(--warning), var(--danger));
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }

        .premium-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(243, 156, 18, 0.4);
        }

        .purchase-link {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            display: none;
        }

        .purchase-link.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .purchase-link a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
            word-break: break-all;
        }

        /* ===== MAIN LAYOUT ===== */
        .dashboard {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
            margin-top: 30px;
        }

        @media (max-width: 1024px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
        }

        /* ===== PAGE CONTENT ===== */
        .page-content {
            display: none;
        }

        .page-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        /* ===== GANN CALCULATOR PAGE ===== */
        .gann-calculator {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 25px;
            margin: 30px 0;
        }

        .gann-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .gann-header h2 {
            color: #4cc9f0;
            margin-bottom: 10px;
            font-size: 2rem;
        }

        .gann-subtitle {
            color: var(--gray);
            font-size: 1.1rem;
            margin-bottom: 20px;
        }

        .gann-content {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        @media (max-width: 900px) {
            .gann-content {
                grid-template-columns: 1fr;
            }
        }

        .gann-input-section {
            background: rgba(255, 255, 255, 0.05);
            padding: 25px;
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .gann-input-group {
            margin-bottom: 25px;
        }

        .gann-label {
            display: block;
            margin-bottom: 10px;
            color: #4cc9f0;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .gann-input {
            width: 100%;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: white;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }

        .gann-input:focus {
            outline: none;
            border-color: #4cc9f0;
            box-shadow: 0 0 0 2px rgba(76, 201, 240, 0.2);
        }

        .gann-calculate-btn {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, #4cc9f0 0%, #4361ee 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }

        .gann-calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(67, 97, 238, 0.3);
        }

        .gann-output-section {
            background: rgba(255, 255, 255, 0.05);
            padding: 25px;
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: none;
        }

        .gann-recommendation {
            text-align: center;
            padding: 20px;
            margin-bottom: 30px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .gann-buy-zone {
            color: #4ade80;
            font-weight: bold;
            font-size: 1.3rem;
        }

        .gann-sell-zone {
            color: #f87171;
            font-weight: bold;
            font-size: 1.3rem;
        }

        .gann-tables-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
        }

        @media (max-width: 700px) {
            .gann-tables-container {
                grid-template-columns: 1fr;
            }
        }

        .gann-table-section {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 12px;
            overflow: hidden;
        }

        .gann-table-title {
            background: rgba(76, 201, 240, 0.1);
            padding: 15px;
            text-align: center;
            font-weight: 600;
            color: #4cc9f0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .gann-table {
            width: 100%;
            border-collapse: collapse;
        }

        .gann-table th {
            background: rgba(0, 0, 0, 0.4);
            padding: 15px;
            text-align: left;
            color: #a9a9a9;
            font-weight: 600;
        }

        .gann-table td {
            padding: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .gann-table tr:hover {
            background: rgba(255, 255, 255, 0.03);
        }

        .gann-explanation {
            background: rgba(255, 255, 255, 0.05);
            padding: 25px;
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 40px;
        }

        .gann-explanation h3 {
            color: #4cc9f0;
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        .gann-explanation p {
            margin-bottom: 15px;
            line-height: 1.6;
            color: #cccccc;
        }

        .gann-explanation ul {
            margin-left: 20px;
            margin-bottom: 20px;
        }

        .gann-explanation li {
            margin-bottom: 10px;
            line-height: 1.6;
            color: #cccccc;
        }

        .gann-note {
            background: rgba(244, 113, 113, 0.1);
            border-left: 4px solid #f87171;
            padding: 15px;
            margin-top: 20px;
            border-radius: 0 8px 8px 0;
        }

        /* ===== CARDS ===== */
        .card {
            background: rgba(30, 41, 59, 0.8);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 25px;
            backdrop-filter: blur(10px);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
        }

        .card-title {
            color: var(--primary);
            font-size: 1.3rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(16, 185, 129, 0.3);
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 700;
        }

        /* ===== PARTICIPANTS DATA ===== */
        .participants-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 10px;
        }

        @media (max-width: 480px) {
            .participants-grid {
                grid-template-columns: 1fr;
            }
        }

        .participant-item {
            background: rgba(255, 255, 255, 0.03);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--border);
            text-align: center;
        }

        .participant-label {
            color: var(--gray);
            font-size: 0.9rem;
            margin-bottom: 8px;
        }

        .participant-value {
            font-size: 1.6rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .participant-view {
            font-size: 0.85rem;
            color: var(--gray);
        }

        /* ===== SUPPORT & RESISTANCE ===== */
        .levels-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-top: 10px;
        }

        @media (max-width: 768px) {
            .levels-grid {
                grid-template-columns: 1fr;
            }
        }

        .levels-section {
            background: rgba(255, 255, 255, 0.03);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--border);
        }

        .levels-title {
            color: var(--light);
            font-size: 1.1rem;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .resistance-title {
            color: var(--accent);
        }

        .support-title {
            color: var(--primary);
        }

        .levels-list {
            list-style: none;
        }

        .levels-list li {
            padding: 12px 15px;
            margin-bottom: 8px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            font-weight: 600;
            font-size: 1.1rem;
            border-left: 4px solid;
            transition: transform 0.2s;
        }

        .levels-list li:hover {
            transform: translateX(5px);
            background: rgba(255, 255, 255, 0.08);
        }

        .levels-list li.resistance-level {
            border-left-color: var(--accent);
        }

        .levels-list li.support-level {
            border-left-color: var(--primary);
        }

        /* ===== REVERSALS SECTION ===== */
        .reversals-container {
            margin-top: 10px;
        }

        .reversals-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        @media (max-width: 768px) {
            .reversals-grid {
                grid-template-columns: 1fr;
            }
        }

        .reversals-section {
            background: rgba(255, 255, 255, 0.03);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--border);
        }

        .reversals-title {
            color: var(--warning);
            font-size: 1.1rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .reversals-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        .reversals-table th {
            background: rgba(243, 156, 18, 0.2);
            color: var(--warning);
            padding: 12px;
            text-align: center;
            font-weight: 600;
            border-bottom: 2px solid rgba(243, 156, 18, 0.3);
        }

        .reversals-table td {
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid var(--border);
            font-size: 1.1rem;
            font-weight: 600;
        }

        .reversals-table tr:last-child td {
            border-bottom: none;
        }

        /* ===== GLOBAL MARKET ===== */
        .global-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 10px;
        }

        .global-item {
            background: rgba(255, 255, 255, 0.03);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--border);
            text-align: center;
        }

        .global-name {
            color: var(--gray);
            font-size: 0.9rem;
            margin-bottom: 10px;
        }

        .global-value {
            font-size: 1.4rem;
            font-weight: 700;
            margin: 5px 0;
        }

        .global-change {
            font-size: 0.85rem;
            padding: 3px 10px;
            border-radius: 15px;
            display: inline-block;
        }

        .change-up {
            background: rgba(16, 185, 129, 0.2);
            color: var(--primary);
        }

        .change-down {
            background: rgba(244, 63, 94, 0.2);
            color: var(--accent);
        }

        .global-sentiment {
            margin-top: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            border-left: 4px solid var(--warning);
        }

        .sentiment-label {
            color: var(--gray);
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        #globalSentiment {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--warning);
        }

        /* ===== INDIA VIX ===== */
        .vix-container {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 20px;
            margin-top: 10px;
        }

        @media (max-width: 768px) {
            .vix-container {
                grid-template-columns: 1fr;
            }
        }

        .vix-main {
            background: rgba(155, 89, 182, 0.1);
            padding: 25px;
            border-radius: 12px;
            border: 1px solid rgba(155, 89, 182, 0.3);
            text-align: center;
        }

        .vix-value {
            font-size: 2.5rem;
            font-weight: 800;
            color: #9b59b6;
            margin: 10px 0;
            text-shadow: 0 0 20px rgba(155, 89, 182, 0.5);
        }

        .range-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        @media (max-width: 480px) {
            .range-grid {
                grid-template-columns: 1fr;
            }
        }

        .range-item {
            background: rgba(255, 255, 255, 0.03);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--border);
            text-align: center;
        }

        .range-label {
            color: var(--gray);
            font-size: 0.9rem;
            margin-bottom: 10px;
        }

        .range-value {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--light);
        }

        /* ===== SIDEBAR ===== */
        .sidebar {
            position: sticky;
            top: 100px;
            height: fit-content;
        }

        /* ===== ABOUT SECTION ===== */
        .about-section {
            background: rgba(255, 255, 255, 0.03);
            padding: 25px;
            border-radius: 16px;
            border: 1px solid var(--border);
            margin-bottom: 25px;
        }

        .about-section h3 {
            color: var(--primary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .about-content p {
            margin-bottom: 15px;
            color: var(--light);
            line-height: 1.7;
        }

        .disclaimer {
            background: rgba(244, 63, 94, 0.1);
            border-left: 4px solid var(--accent);
            padding: 15px;
            border-radius: 0 8px 8px 0;
            margin: 20px 0;
        }

        .disclaimer p {
            color: #ff9999;
            font-size: 0.9rem;
            line-height: 1.6;
        }

        /* ===== UPDATED CONTACT SECTION (Horizontal Layout) ===== */
        .contact-horizontal-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 10px;
        }

        @media (max-width: 768px) {
            .contact-horizontal-grid {
                grid-template-columns: 1fr;
            }
        }

        .contact-left-group,
        .contact-right-group {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .contact-item {
            background: rgba(255, 255, 255, 0.03);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--border);
            text-align: center;
            transition: transform 0.3s;
            flex: 1;
        }

        .contact-item:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.05);
        }

        .contact-icon {
            font-size: 2rem;
            margin-bottom: 15px;
            color: var(--primary);
        }

        .contact-label {
            color: var(--gray);
            font-size: 0.9rem;
            margin-bottom: 8px;
        }

        .contact-value {
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--light);
        }

        .contact-link {
            color: var(--primary);
            text-decoration: none;
            font-size: 0.9rem;
            display: inline-block;
            margin-top: 5px;
        }

        .contact-link:hover {
            text-decoration: underline;
        }

        .whatsapp-btn {
            display: inline-block;
            background: #25D366;
            color: white;
            padding: 8px 20px;
            border-radius: 20px;
            text-decoration: none;
            font-weight: 600;
            margin-top: 10px;
            transition: transform 0.3s;
        }

        .whatsapp-btn:hover {
            transform: scale(1.05);
            color: white;
            box-shadow: 0 5px 15px rgba(37, 211, 102, 0.3);
        }

        /* ===== OTHER PAGES ===== */
        .page-header {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(5, 150, 105, 0.1));
            border-radius: 16px;
            padding: 30px;
            margin: 30px 0;
            text-align: center;
        }

        .page-header h2 {
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 2rem;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin: 40px 0;
        }

        .feature-card {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 30px;
            text-align: center;
            transition: all 0.3s;
        }

        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .feature-icon {
            font-size: 3rem;
            color: var(--primary);
            margin-bottom: 20px;
        }

        .feature-card h3 {
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        /* ===== RESTORED ORIGINAL FOOTER ===== */
        footer {
            background: rgba(15, 23, 42, 0.95);
            padding: 40px 0 20px;
            border-top: 1px solid var(--border);
            margin-top: 40px;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .footer-logo {
            padding-right: 20px;
        }

        .footer-logo h3 {
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 1.8rem;
        }

        .footer-description {
            color: var(--gray);
            margin-top: 15px;
            font-size: 0.95rem;
            line-height: 1.7;
        }

        .features-list {
            list-style: none;
            margin-top: 15px;
        }

        .features-list li {
            margin-bottom: 10px;
            color: var(--light);
            display: flex;
            align-items: flex-start;
            gap: 10px;
            font-size: 0.95rem;
        }

        .features-list i {
            color: var(--primary);
            margin-top: 3px;
            flex-shrink: 0;
        }

        .footer-links h4 {
            color: var(--light);
            margin-bottom: 20px;
            font-size: 1.2rem;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border);
        }

        .footer-links ul {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 12px;
        }

        .footer-links a {
            color: var(--gray);
            text-decoration: none;
            transition: color 0.3s;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .footer-links a:hover {
            color: var(--primary);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 25px;
            border-top: 1px solid var(--border);
            color: var(--gray);
            font-size: 0.9rem;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .footer-disclaimer {
            background: rgba(244, 63, 94, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin-top: 10px;
            font-size: 0.85rem;
            line-height: 1.6;
            color: #ff9999;
        }

        /* ===== LEGAL PAGES STYLES ===== */
        .legal-page {
            max-width: 800px;
            margin: 0 auto;
        }

        .legal-section {
            background: rgba(30, 41, 59, 0.8);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 25px;
        }

        .legal-section h3 {
            color: var(--primary);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(16, 185, 129, 0.3);
        }

        .legal-section h4 {
            color: var(--primary);
            margin: 25px 0 15px;
        }

        .legal-section p {
            margin-bottom: 15px;
            line-height: 1.7;
            color: var(--light);
        }

        .legal-section ul {
            margin-left: 25px;
            margin-bottom: 20px;
        }

        .legal-section li {
            margin-bottom: 10px;
            line-height: 1.6;
            color: var(--light);
        }

        .highlight-box {
            background: rgba(243, 156, 18, 0.1);
            border-left: 4px solid var(--warning);
            padding: 20px;
            border-radius: 0 8px 8px 0;
            margin: 25px 0;
        }

        /* ===== LOADING STATES ===== */
        .loading {
            opacity: 0.7;
            position: relative;
            pointer-events: none;
        }

        .loading::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 30px;
            height: 30px;
            border: 3px solid var(--border);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }

        /* ===== UTILITY CLASSES ===== */
        .text-center { text-align: center; }
        .mt-20 { margin-top: 20px; }
        .mb-20 { margin-bottom: 20px; }
        .pulse { animation: pulse 2s infinite; }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }
    </style>
</head>
<body>
    <!-- LOGIN SYSTEM -->
    <div class="login-overlay" id="loginOverlay">
        <div class="login-box">
            <div class="login-header">
                <h2>DecodeXMarket</h2>
                <p style="color: var(--gray);">Please login to access the dashboard</p>
            </div>
            
            <div class="login-tabs">
                <button class="login-tab active" data-tab="user">User Login</button>
                <button class="login-tab" data-tab="admin">Admin Login</button>
            </div>
            
            <!-- USER LOGIN -->
            <div class="login-form active" id="userLoginForm">
                <div class="form-group">
                    <label for="userEmail">Email</label>
                    <input type="email" id="userEmail" placeholder="Enter your email">
                </div>
                <div class="form-group">
                    <label for="userPassword">Password</label>
                    <input type="password" id="userPassword" placeholder="Enter your password">
                </div>
                <button class="login-btn" onclick="loginUser()">Login</button>
                
                <div class="register-note">
                    <p>Don't have an account? <a href="https://forms.gle/JhdWJDXDH93NHx6Y8" target="_blank" class="register-link">Register here</a></p>
                </div>
            </div>
            
            <!-- ADMIN LOGIN -->
            <div class="login-form" id="adminLoginForm">
                <div class="form-group">
                    <label for="adminEmail">Admin ID</label>
                    <input type="text" id="adminEmail" placeholder="Enter admin ID">
                </div>
                <div class="form-group">
                    <label for="adminPassword">Password</label>
                    <input type="password" id="adminPassword" placeholder="Enter admin password">
                </div>
                <button class="login-btn" onclick="loginAdmin()">Login as Admin</button>
            </div>
        </div>
    </div>

    <!-- MAIN APP (HIDDEN UNTIL LOGIN) -->
    <div id="mainApp" style="display: none;">
        <!-- UPDATED HEADER -->
        <header class="header">
            <div class="header-container">
                
                <!-- Logo Section -->
                <div class="logo-section" id="logoButton">
                    <div class="logo-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="logo-text">
                        <span class="logo-main">DecodeX</span>
                        <span class="logo-sub">Market with RSK</span>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="header-actions">
                    <!-- Last Updated Time Display -->
                    <div class="last-updated">
                        <i class="fas fa-clock"></i>
                        Last: <span id="lastUpdate">Never</span>
                    </div>
                    
                    <!-- Refresh Button -->
                    <button class="action-button refresh-button" id="refreshButton" title="Refresh Data">
                        <i class="fas fa-sync-alt"></i>
                    </button>

                    <!-- User Info & Logout -->
                    <div class="user-info">
                        <div class="user-details">
                            <span class="user-name" id="userName"></span>
                            <span class="user-role" id="userRole"></span>
                        </div>
                        <button class="logout-button" id="logoutButton" title="Logout">
                            <i class="fas fa-sign-out-alt"></i>
                        </button>
                    </div>

                    <!-- Hamburger Menu Button -->
                    <button class="menu-toggle" id="menuToggle">
                        <i class="fas fa-bars" id="menuIcon"></i>
                    </button>
                </div>
            </div>

            <!-- Mobile Menu -->
            <div class="mobile-menu" id="mobileMenu">
                <div class="mobile-menu-container">
                    <!-- UPDATED NAVIGATION AS REQUESTED -->
                     <nav class="nav-items">
                  <button class="nav-button active" data-page="home">
                      <div class="nav-icon">
                          <i class="fas fa-home"></i>
                        </div>
                        DASHBOARD
                     </button> 

                      <!-- ADMIN ONLY: Overview Page -->
                   <button class="nav-button admin-only" data-page="overview" style="display: none;">
                      <div class="nav-icon">
                             <i class="fas fa-chart-line"></i>
                      </div>
                          MARKET OVERVIEW
                      </button>

                    <button class="nav-button" id="premiumIndicatorsButton">
                         <div class="nav-icon">
                             <i class="fas fa-crown"></i> 
                         </div>
                         PREMIUM INDICATORS
                       </button>
                        <button class="nav-button" data-page="oi">
                            <div class="nav-icon">
                                <i class="fas fa-chart-bar"></i>
                            </div>
                            O.I ANALYSIS
                        </button>
                        <button class="nav-button" data-page="gann">
                            <div class="nav-icon">
                                <i class="fas fa-bullseye"></i>
                            </div>
                            GANN TOOL(SCALPING)
                        </button>
                        <button class="nav-button" data-page="links">
                            <div class="nav-icon">
                                <i class="fas fa-link"></i>
                            </div>
                            USEFUL LINKS
                        </button>
                        <button class="nav-button" data-page="contact">
                            <div class="nav-icon">
                                <i class="fas fa-envelope"></i>
                            </div>
                            CONTACT US
                        </button>
                    </nav>

                    <!-- User Info & Logout at Bottom -->
                    <div class="mobile-user-section">
                        <div class="divider"></div>
                        <div class="user-card">
                            <div class="user-card-left">
                                <div class="user-avatar">
                                    <i class="fas fa-user" id="mobileAvatarIcon"></i>
                                </div>
                                <div class="user-card-info">
                                    <h4 id="mobileUserName"></h4>
                                    <div class="user-card-badge" id="mobileUserRole"></div>
                                </div>
                            </div>
                            <button class="mobile-logout-button" id="mobileLogoutButton" title="Logout">
                                <i class="fas fa-sign-out-alt"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- DATA UPDATE NOTICE -->
<div class="container">
    <div class="data-update-notice">
        <div class="notice-text">
            <span class="notice-label"><i class="fas fa-clock"></i> DATA UPDATE NOTICE:</span>
            Visit after 
            <span class="update-time">10:00 PM - 11:00 PM</span>
            for updated post-market analysis.
        </div>
        <div class="data-update-note">
            <i class="fas fa-info-circle"></i> PREDICTION FOR: NIFTY || SENSEX || BANKNIFTY.
        </div>
    </div>
</div>

        <!-- MAIN CONTENT -->
        <main class="container">
            <!-- HOME PAGE -->
            <div class="page-content active" id="homePage">
                <!-- DATE & PREDICTION SECTION -->
                <div class="date-section">
                    <div class="date-card">
                        <h3><i class="fas fa-calendar-alt"></i> Prev.Trading Date</h3>
                        <div id="currentDate">Loading...</div>
                        <p class="prediction-subtitle">Fii-Dii Data Decoding</p>
                    </div>
                    
                    <div class="prediction-card">
                        <h3><i class="fas fa-bullhorn"></i> NEXT DAY FINAL PREDICTION</h3>
                        <div id="finalPrediction">Loading Market Prediction...</div>
                        <p class="prediction-subtitle">Nifty Direction Based on Data Decoding</p>
                    </div>
                </div>

                <!-- DASHBOARD GRID -->
                <div class="dashboard">
                    <!-- LEFT COLUMN -->
                    <div class="left-column">
                        <!-- PARTICIPANTS DATA -->
                        <div class="card">
                            <h3 class="card-title"><i class="fas fa-users"></i> PARTICIPANTS DATA</h3>
                            <div class="participants-grid" id="participantsData">
                                <!-- Filled by JavaScript -->
                            </div>
                        </div>

                        <!-- SUPPORT & RESISTANCE LEVELS -->
                        <div class="card">
                            <h3 class="card-title"><i class="fas fa-layer-group"></i> Intraday Levels</h3>
                            <div class="levels-grid">
                                <div class="levels-section">
                                    <h4 class="levels-title resistance-title">
                                        <i class="fas fa-arrow-up"></i> Resistance Levels
                                    </h4>
                                    <ul class="levels-list" id="resistanceLevels">
                                        <!-- Filled by JavaScript -->
                                    </ul>
                                </div>
                                
                                <div class="levels-section">
                                    <h4 class="levels-title support-title">
                                        <i class="fas fa-arrow-down"></i> Support Levels
                                    </h4>
                                    <ul class="levels-list" id="supportLevels">
                                        <!-- Filled by JavaScript -->
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- EXPECTED REVERSALS -->
                        <div class="card">
                            <h3 class="card-title"><i class="fas fa-retweet"></i> Expected Reversal (Number of Bars)</h3>
                            <div class="reversals-container">
                                <div class="reversals-grid">
                                    <div class="reversals-section">
                                        <h4 class="reversals-title">
                                            <i class="fas fa-clock"></i> 15 Minute Timeframe
                                        </h4>
                                        <table class="reversals-table" id="reversals15minTable">
                                            <thead>
                                                <tr>
                                                    <th>15 Min Bars</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <!-- Filled by JavaScript -->
                                            </tbody>
                                        </table>
                                    </div>
                                    
                                    <div class="reversals-section">
                                        <h4 class="reversals-title">
                                            <i class="fas fa-clock"></i> 5 Minute Timeframe
                                        </h4>
                                        <table class="reversals-table" id="reversals5minTable">
                                            <thead>
                                                <tr>
                                                    <th>5 Min Bars</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <!-- Filled by JavaScript -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- RIGHT SIDEBAR -->
                    <div class="sidebar">
                        <!-- GLOBAL MARKET -->
                        <div class="card">
                            <h3 class="card-title"><i class="fas fa-globe"></i> Global Indices</h3>
                            <div class="global-grid" id="globalMarket">
                                <!-- Filled by JavaScript -->
                            </div>
                            
                            <!-- GLOBAL SENTIMENT -->
                            <div class="global-sentiment">
                                <div class="sentiment-label">Overall Global Sentiment</div>
                                <div id="globalSentiment">Loading...</div>
                            </div>
                        </div>

                        <!-- INDIA VIX & RANGES -->
                        <div class="card">
                            <h3 class="card-title"><i class="fas fa-chart-line"></i> India VIX & Daily Range</h3>
                            <div class="vix-container">
                                <div class="vix-main">
                                    <div class="global-name">India VIX</div>
                                    <div class="vix-value" id="indiaVix">0.00</div>
                                    <div class="bars-label">Volatility Index</div>
                                </div>
                                <div class="range-grid">
                                    <div class="range-item">
                                        <div class="range-label">Max Upside Move</div>
                                        <div class="range-value" id="maxUpside">0.0</div>
                                    </div>
                                    <div class="range-item">
                                        <div class="range-label">Min Downside Move</div>
                                        <div class="range-value" id="minDownside">0.0</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ABOUT SECTION -->
                        <div class="about-section">
                            <h3><i class="fas fa-user-md"></i> About Me</h3>
                            <div class="about-content">
                                <p>Hello! I'm <strong>Dr. Ravi Shankar</strong> (BAMS). Trading is my passionate hobby with 5+ years of market research.</p>
                                
                                <div class="disclaimer">
                                    <p><i class="fas fa-exclamation-triangle"></i> <strong>Important:</strong> I am NOT SEBI registered. Trading is NOT my full-time career. All information is for educational purposes only.</p>
                                </div>
                                
                                <p>I apply Gann concepts and data decoding strategies to analyze Nifty and other instruments.</p>
                            </div>
                        </div>

                        <!-- UPDATED CONTACT SECTION (Horizontal Layout) -->
                        <div class="card">
                            <h3 class="card-title"><i class="fas fa-envelope"></i> Contact</h3>
                            <div class="contact-horizontal-grid">
                                <div class="contact-left-group">
                                    <div class="contact-item">
                                        <div class="contact-icon">
                                            <i class="fab fa-instagram"></i>
                                        </div>
                                        <div class="contact-label">Instagram</div>
                                        <div class="contact-value">@drshankar.ravi</div>
                                        <a href="https://www.instagram.com/drshankar.ravi/" target="_blank" class="contact-link">
                                            <i class="fas fa-external-link-alt"></i> Follow
                                        </a>
                                    </div>
                                    
                                    <div class="contact-item">
                                        <div class="contact-icon">
                                            <i class="fas fa-envelope"></i>
                                        </div>
                                        <div class="contact-label">Email</div>
                                        <div class="contact-value">rshankartrader@gmail.com</div>
                                        <a href="mailto:rshankartrader@gmail.com" class="contact-link">
                                            <i class="fas fa-paper-plane"></i> Send Email
                                        </a>
                                    </div>
                                </div>
                                
                                <div class="contact-right-group">
                                    <div class="contact-item">
                                        <div class="contact-icon">
                                            <i class="fab fa-telegram"></i>
                                        </div>
                                        <div class="contact-label">Telegram Group</div>
                                        <div class="contact-value">DecodeXMarket</div>
                                        <a href="https://t.me/+4SN3IyXEgrs4MDVl" target="_blank" class="contact-link">
                                            <i class="fas fa-external-link-alt"></i> Join Group
                                        </a>
                                    </div>
                                    
                                    <div class="contact-item">
                                        <div class="contact-icon">
                                            <i class="fab fa-whatsapp"></i>
                                        </div>
                                        <div class="contact-label">WhatsApp</div>
                                        <div class="contact-value">+91 8271890090</div>
                                        <a href="https://wa.me/918271890090?text=Hi%20from%20DecodeXMarket%20website%2C%20I%20have%20a%20query" 
                                           target="_blank" class="whatsapp-btn">
                                            <i class="fab fa-whatsapp"></i> Message
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- PREMIUM INDICATORS PAGE -->
            <div class="page-content" id="premiumPage">
                <div class="page-header">
                    <h2><i class="fas fa-crown"></i> Premium Indicators</h2>
                    <p>Advanced trading indicators and tools for professional traders</p>
                </div>

                <div id="premiumContent">
                    <!-- Premium content will be loaded here based on user access -->
                </div>
            </div>

            <!-- TIME CYCLES & ASTRO PAGE (Hidden from mobile menu but still accessible via footer) -->
            <div class="page-content" id="timecyclesPage">
                <div class="page-header">
                    <h2><i class="fas fa-clock"></i> Time Cycles & Astro Analysis</h2>
                    <p>Gann concepts and astronomical cycles for market timing</p>
                </div>

                <div id="timecyclesContent">
                    <!-- Time cycles content will be loaded here based on user access -->
                </div>
            </div>

            <!-- O.I ANALYSIS PAGE -->
            <div class="page-content" id="oiPage">
                <div class="page-header">
                    <h2><i class="fas fa-chart-bar"></i> Open Interest Analysis</h2>
                    <p>Advanced Open Interest analysis for Nifty and Bank Nifty</p>
                </div>

                <div id="oiContent">
                    <div class="premium-message">
                        <h3><i class="fas fa-lock"></i> Premium Content Locked</h3>
                        <p>You need to purchase access to view Open Interest Analysis. This content is available to users who have purchased the premium package.</p>
                        <button class="premium-btn" onclick="showPurchaseLink()">
                            <i class="fas fa-shopping-cart"></i> Purchase Access
                        </button>
                        <div class="purchase-link" id="purchaseLink4">
                            <p>Purchase Link: <a href="https://decodemarket.com/premium-access" target="_blank">https://decodemarket.com/premium-access</a></p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- GANN CALCULATOR PAGE -->
            <div class="page-content" id="gannPage">
                <div class="gann-calculator">
                    <div class="gann-header">
                        <h2>Gann Square of 9 Calculator</h2>
                        <p class="gann-subtitle">Calculate support and resistance levels using W.D. Gann's Square of 9 methodology</p>
                    </div>
                    
                    <div class="gann-content">
                        <div class="gann-input-section">
                            <div class="gann-input-group">
                                <label for="priceInput" class="gann-label">Enter Current Price:</label>
                                <input type="number" id="priceInput" class="gann-input" placeholder="e.g., 150.50" step="0.01" min="0.01">
                            </div>
                            <button class="gann-calculate-btn" id="calculateBtn">Calculate Gann Levels</button>
                        </div>
                        
                        <div class="gann-output-section" id="output">
                            <div class="gann-recommendation" id="rec">
                                <!-- Recommendations will be inserted here -->
                            </div>
                            
                            <div class="gann-tables-container">
                                <div class="gann-table-section">
                                    <div class="gann-table-title">Resistance Levels</div>
                                    <table class="gann-table">
                                        <thead>
                                            <tr>
                                                <th>Degree</th> <th>Price Level</th>
                                            </tr>
                                        </thead>
                                        <tbody id="resBody">
                                            <!-- Resistance levels will be inserted here -->
                                        </tbody>
                                    </table>
                                </div>
                                
                                <div class="gann-table-section">
                                    <div class="gann-table-title">Support Levels</div>
                                    <table class="gann-table">
                                        <thead>
                                            <tr>
                                                <th>Degree</th>
                                                <th>Price Level</th>
                                            </tr>
                                        </thead>
                                        <tbody id="suppBody">
                                            <!-- Support levels will be inserted here -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="gann-explanation">
                        <h3>About Gann Square of 9</h3>
                        <p>The Gann Square of 9 is a technical analysis tool developed by W.D. Gann. It's based on the principle that price and time are related and that markets move in predictable geometric patterns and angles.</p>
                        
                        <p><strong>How it works:</strong></p>
                        <ul>
                            <li>The tool calculates the square root of the current price</li>
                            <li>It then adds or subtracts specific degrees (converted to Gann units) to find support and resistance levels</li>
                            <li>The most important angles are 45, 90, 180, and 360</li>
                            <li>Levels are recalculated by squaring the modified square root value</li>
                        </ul>
                        
                        <p><strong>Trading Rules:</strong></p>
                        <ul>
                            <li><span class="gann-buy-zone">BUY ABOVE:</span> The first resistance level (15 above the root price)</li>
                            <li><span class="gann-sell-zone">SELL BELOW:</span> The first support level (15 below the root price)</li>
                            <li>Stronger support/resistance is found at key angles like 45, 90, 180, and 360</li>
                        </ul>
                        
                        <div class="gann-note">
                            <strong>Note:</strong> This tool is for educational purposes only. Always conduct your own research and consult with financial advisors before making investment decisions.
                        </div>
                    </div>
                </div>
            </div>

            <!-- USEFUL LINKS PAGE -->
            <div class="page-content" id="linksPage">
                <div class="page-header">
                    <h2><i class="fas fa-link"></i> Useful Links</h2>
                    <p>Curated resources and tools for traders</p>
                </div>

                <div id="linksContent">
                    <!-- Links content will be loaded here based on user access -->
                </div>
            </div>

            <!-- CONTACT US PAGE -->
            <div class="page-content" id="contactPage">
                <div class="page-header">
                    <h2><i class="fas fa-envelope"></i> Contact Us</h2>
                    <p>Get in touch with our team</p>
                </div>

                <div class="card">
                    <h3 class="card-title"><i class="fas fa-comments"></i> Contact Information</h3>
                    <div class="contact-horizontal-grid">
                        <div class="contact-left-group">
                            <div class="contact-item">
                                <div class="contact-icon">
                                    <i class="fas fa-user-md"></i>
                                </div>
                                <div class="contact-label">Primary Contact</div>
                                <div class="contact-value">Dr. Ravi Shankar</div>
                                <p style="color: var(--gray); margin-top: 10px;">BAMS, Trading Analyst</p>
                            </div>
                            
                            <div class="contact-item">
                                <div class="contact-icon">
                                    <i class="fas fa-envelope"></i>
                                </div>
                                <div class="contact-label">Email</div>
                                <div class="contact-value">rshankartrader@gmail.com</div>
                                <a href="mailto:rshankartrader@gmail.com" class="contact-link">
                                    <i class="fas fa-paper-plane"></i> Send Email
                                </a>
                            </div>
                        </div>
                        
                        <div class="contact-right-group">
                            <div class="contact-item">
                                <div class="contact-icon">
                                    <i class="fab fa-whatsapp"></i>
                                </div>
                                <div class="contact-label">WhatsApp Support</div>
                                <div class="contact-value">+91 8271890090</div>
                                <a href="https://wa.me/918271890090?text=Hi%20from%20DecodeXMarket%20website%2C%20I%20have%20a%20query" 
                                   target="_blank" class="whatsapp-btn">
                                    <i class="fab fa-whatsapp"></i> Message on WhatsApp
                                </a>
                            </div>
                            
                            <div class="contact-item">
                                <div class="contact-icon">
                                    <i class="fas fa-clock"></i>
                                </div>
                                <div class="contact-label">Response Time</div>
                                <div class="contact-value">24-48 Hours</div>
                                <p style="color: var(--gray); margin-top: 10px;">We respond to all inquiries</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- LEGAL PAGES -->
            <!-- Disclaimer Page -->
            <div class="page-content" id="disclaimerPage">
                <div class="page-header">
                    <h2><i class="fas fa-exclamation-triangle"></i> Disclaimer</h2>
                    <p>Important Legal Information & Risk Disclosure</p>
                </div>

                <div class="legal-page">
                    <div class="legal-section">
                        <h3>General Disclaimer</h3>
                        <p>This website (DecodeXMarket) and all its content, tools, predictions, and analyses are provided for EDUCATIONAL AND INFORMATIONAL PURPOSES ONLY. The information presented here should NOT be construed as financial advice, investment recommendations, or trading signals.</p>
                        
                        <div class="highlight-box">
                            <h4> IMPORTANT WARNING </h4>
                            <p>I, Dr. Ravi Shankar (BAMS), am <strong>NOT registered with SEBI (Securities and Exchange Board of India)</strong> as a research analyst, investment advisor, or in any professional capacity related to financial markets.</p>
                        </div>
                        
                        <h4>Trading is NOT My Full-Time Career</h4>
                        <p>I am a medical professional (BAMS) by qualification. Market analysis and trading are pursued as passionate hobbies and academic interests, not as my primary occupation.</p>
                        
                        <h4>Educational Purpose Only</h4>
                        <p>All content, including but not limited to:</p>
                        <ul>
                            <li>Market predictions and forecasts</li>
                            <li>Support and resistance levels</li>
                            <li>Gann calculations and time cycle analysis</li>
                            <li>FII/DII data interpretations</li>
                            <li>Any trading-related information</li>
                        </ul>
                        <p>...is shared purely for educational purposes to demonstrate analytical techniques and should not be interpreted as buy/sell recommendations.</p>
                        
                        <h4>No Guarantee of Accuracy</h4>
                        <p>Financial markets are inherently unpredictable. While efforts are made to provide accurate analysis, there is NO guarantee that predictions will be correct. Past performance does NOT guarantee future results.</p>
                        
                        <h4>Your Responsibility</h4>
                        <p>By using this website and its content, you acknowledge and agree that:</p>
                        <ul>
                            <li>You are solely responsible for your trading and investment decisions</li>
                            <li>You should consult with qualified financial advisors before making any investment</li>
                            <li>You understand the risks involved in trading financial instruments</li>
                            <li>You will not hold DecodeXMarket or its owner liable for any losses incurred</li>
                        </ul>
                        
                        <h4>Risk Disclosure</h4>
                        <p>Trading in financial markets involves substantial risk of loss and is not suitable for all investors. You should carefully consider whether trading is appropriate for you in light of your experience, objectives, financial resources, and other circumstances.</p>
                    </div>
                </div>
            </div>

            <!-- Privacy Policy Page -->
            <div class="page-content" id="privacyPage">
                <div class="page-header">
                    <h2><i class="fas fa-shield-alt"></i> Privacy Policy</h2>
                    <p>How we collect, use, and protect your information</p>
                </div>

                <div class="legal-page">
                    <div class="legal-section">
                        <h3>Privacy Policy for DecodeXMarket</h3>
                        <p><strong>Last Updated:</strong> 01/01/2026 </p>
                        
                        <h4>Information We Collect</h4>
                        <p>We collect the following types of information:</p>
                        <ul>
                            <li><strong>Account Information:</strong> Email address, name (if provided) for user registration</li>
                            <li><strong>Usage Data:</strong> Pages visited, features used, time spent on site</li>
                            <li><strong>Technical Data:</strong> Browser type, device information, IP address (for security purposes)</li>
                            <li><strong>Google Login Data:</strong> Only basic profile information through Google Apps Script authentication</li>
                        </ul>
                        
                        <h4>How We Use Your Information</h4>
                        <p>Your information is used to:</p>
                        <ul>
                            <li>Provide access to the DecodeXMarket platform</li>
                            <li>Authenticate users and maintain account security</li>
                            <li>Improve website functionality and user experience</li>
                            <li>Communicate important updates (if you opt-in)</li>
                            <li>Prevent fraud and unauthorized access</li>
                        </ul>
                        
                        <h4>Data Storage and Security</h4>
                        <ul>
                            <li>User credentials are stored securely using industry-standard practices</li>
                            <li>Local storage is used for session management only</li>
                            <li>We implement reasonable security measures to protect your data</li>
                            <li>No sensitive financial information is collected or stored</li>
                        </ul>
                        
                        <h4>Third-Party Services</h4>
                        <p>We use the following third-party services:</p>
                        <ul>
                            <li><strong>Google Apps Script:</strong> For user authentication</li>
                            <li><strong>Google Sheets:</strong> For market data storage (public data only)</li>
                            <li><strong>Font Awesome:</strong> For icons</li>
                            <li><strong>Google Forms:</strong> For user registration</li>
                        </ul>
                        <p>These services have their own privacy policies which we encourage you to review.</p>
                        
                        <h4>Cookies and Tracking</h4>
                        <p>We use minimal technical cookies for:</p>
                        <ul>
                            <li>Session management</li>
                            <li>Remembering login status</li>
                            <li>Basic analytics to improve user experience</li>
                        </ul>
                        <p>We do not use cookies for advertising or extensive tracking.</p>
                        
                        <h4>Your Rights</h4>
                        <p>You have the right to:</p>
                        <ul>
                            <li>Access your personal information</li>
                            <li>Request correction of inaccurate data</li>
                            <li>Request deletion of your account</li>
                            <li>Opt-out of communications</li>
                        </ul>
                        
                        <h4>Contact for Privacy Concerns</h4>
                        <p>For any privacy-related questions or concerns, please contact us at: rshankartrader@gmail.com</p>
                    </div>
                </div>
            </div>

            <!-- Terms & Conditions Page -->
            <div class="page-content" id="termsPage">
                <div class="page-header">
                    <h2><i class="fas fa-file-contract"></i> Terms & Conditions</h2>
                    <p>Rules for using DecodeXMarket platform</p>
                </div>

                <div class="legal-page">
                    <div class="legal-section">
                        <h3>Terms and Conditions of Use</h3>
                        <p><strong>Effective Date:</strong> 01/01/2026 </p>
                        
                        <div class="highlight-box">
                            <h4> BY USING THIS WEBSITE, YOU AGREE TO THESE TERMS </h4>
                            <p>If you do not agree with any part of these terms, please do not use DecodeXMarket.</p>
                        </div>
                        
                        <h4>1. Acceptance of Terms</h4>
                        <p>By accessing and using DecodeXMarket, you acknowledge that you have read, understood, and agree to be bound by these Terms and Conditions.</p>
                        
                        <h4>2. Educational Purpose Only</h4>
                        <p>DecodeXMarket is an educational platform. All content, tools, and analysis are provided for:</p>
                        <ul>
                            <li>Educational demonstration of market analysis techniques</li>
                            <li>Academic study of financial markets</li>
                            <li>Research purposes only</li>
                        </ul>
                        <p><strong>NOT for making actual trading decisions.</strong></p>
                        
                        <h4>3. User Eligibility</h4>
                        <p>You must be at least 18 years old to use this platform. By using DecodeXMarket, you represent that you are of legal age to form a binding contract.</p>
                        
                        <h4>4. Account Responsibility</h4>
                        <ul>
                            <li>You are responsible for maintaining the confidentiality of your login credentials</li>
                            <li>You are responsible for all activities under your account</li>
                            <li>You must notify us immediately of any unauthorized use</li>
                            <li>We reserve the right to terminate accounts for violation of terms</li>
                        </ul>
                        
                        <h4>5. Prohibited Activities</h4>
                        <p>You agree NOT to:</p>
                        <ul>
                            <li>Use the platform for illegal purposes</li>
                            <li>Attempt to hack, disrupt, or overload the system</li>
                            <li>Scrape, copy, or reproduce content without permission</li>
                            <li>Misrepresent the platform's information as financial advice</li>
                            <li>Use automated bots or scripts to access the platform</li>
                        </ul>
                        
                        <h4>6. Intellectual Property</h4>
                        <p>All content on DecodeXMarket, including but not limited to:</p>
                        <ul>
                            <li>Website design and layout</li>
                            <li>Analytical tools and calculators</li>
                            <li>Market analysis methodology</li>
                            <li>Text, graphics, and logos</li>
                        </ul>
                        <p>...are the property of DecodeXMarket and are protected by copyright laws.</p>
                        
                        <h4>7. Limitation of Liability</h4>
                        <p>To the maximum extent permitted by law, DecodeXMarket and its owner shall not be liable for:</p>
                        <ul>
                            <li>Any direct, indirect, incidental, or consequential damages</li>
                            <li>Losses resulting from use of information on this platform</li>
                            <li>Inaccuracy or errors in market predictions</li>
                            <li>Interruption of service or technical issues</li>
                        </ul>
                        
                        <h4>8. Premium Content</h4>
                        <p>Premium features are provided "as is" with no guarantees of profitability. Purchase of premium access does not entitle you to personalized advice or guaranteed results.</p>
                        
                        <h4>9. Modification of Terms</h4>
                        <p>We reserve the right to modify these terms at any time. Continued use of the platform constitutes acceptance of modified terms.</p>
                        
                        <h4>10. Governing Law</h4>
                        <p>These terms shall be governed by and construed in accordance with the laws of India. Any disputes shall be subject to the jurisdiction of courts in [Your City/State], India.</p>
                        
                        <h4>11. Contact Information</h4>
                        <p>For questions about these Terms & Conditions, contact: rshankartrader@gmail.com</p>
                    </div>
                </div>
            </div>
        </main>

        <!-- RESTORED ORIGINAL FOOTER -->
        <footer>
            <div class="container">
                <div class="footer-content">
                    <div class="footer-logo">
                        <h3>DecodeXMarket</h3>
                        <div class="footer-description">
                            <p><strong>Where Data meets Time Cycles.</strong></p>
                            <ul class="features-list">
                                <li><i class="fas fa-chart-line"></i> Daily FII/DII Decoding</li>
                                <li><i class="fas fa-star"></i> AstroIndicator Reversals</li>
                                <li><i class="fas fa-layer-group"></i> S&R Levels that Hold</li>
                                <li><i class="fas fa-bullseye"></i> Nifty & BankNifty Predictions</li>
                            </ul>
                            <p style="margin-top: 15px;">An educational platform for market analysis enthusiasts</p>
                        </div>
                    </div>
                    
                    <div class="footer-links">
                        <h4>Quick Links</h4>
                        <ul>
                            <li><a href="index.html"><i class="fas fa-crown"></i> Home </a></li>
                            <li><a href="indicators.html"><i class="fas fa-crown"></i> Premium Indicators</a></li>
                            <li><a href="#" class="nav-link" data-page="timecycles"><i class="fas fa-clock"></i> Time Cycles</a></li>
                            <li><a href="oi.html"><i class="fas fa-chart-bar"></i> O.I Analysis</a></li>
                            <li><a href="#" class="nav-link" data-page="gann"><i class="fas fa-calculator"></i> Gann Calculator</a></li>
                            <li><a href="#" class="nav-link" data-page="links"><i class="fas fa-link"></i> Useful Links</a></li>
                            <li><a href="#" class="nav-link" data-page="contact"><i class="fas fa-phone"></i> Contact</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-links">
                        <h4>Legal</h4>
                        <ul>
                            <li><a href="#" class="nav-link" data-page="disclaimer"><i class="fas fa-exclamation-triangle"></i> Disclaimer</a></li>
                            <li><a href="#" class="nav-link" data-page="privacy"><i class="fas fa-shield-alt"></i> Privacy Policy</a></li>
                            <li><a href="#" class="nav-link" data-page="terms"><i class="fas fa-file-contract"></i> Terms & Conditions</a></li>
                        </ul>
                    </div>
                </div>
                
                <div class="footer-bottom">
                    <p>&copy; 2024 DecodeXMarket with RSK. All rights reserved.</p>
                    <div class="footer-disclaimer">
                        <p><i class="fas fa-exclamation-circle"></i> <strong>IMPORTANT:</strong> I am NOT SEBI registered. Trading is NOT my full-time career. All information is for educational purposes only. My market study should NOT be taken as buy/sell recommendations.</p>
                    </div>
                </div>
            </div>
        </footer>
    </div>

     <!-- JAVASCRIPT - FIXED NAVIGATION -->
    <script>
        // ===== AUTHENTICATION SYSTEM =====
        let currentUser = null;
        let users = [];
        
        // Admin credentials
        const ADMIN_CREDENTIALS = {
            id: "Ravi@Admin",
            password: "RadheRadhe@2000"
        };

        // Google Apps Script URL for login authentication
        const LOGIN_API_URL = "https://script.google.com/macros/s/AKfycbx75r_4U2RjpihxddZJulj1JkhaizxElBe2rv845586WnOgPbOjXOmVMt1MEfA2OIDt-w/exec";

        // Initialize users from localStorage
        function initializeUsers() {
            const savedUsers = localStorage.getItem('decodexmarket_users');
            if (savedUsers) {
                users = JSON.parse(savedUsers);
            }
            
            // Check if user is already logged in
            const savedUser = localStorage.getItem('decodexmarket_current_user');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                showMainApp();
            }
        }

        // User login function - USING GOOGLE APPS SCRIPT
        async function loginUser() {
            const email = document.getElementById('userEmail').value.trim();
            const password = document.getElementById('userPassword').value;
            
            if (!email || !password) {
                showNotification('Please enter email and password!', 'error');
                return;
            }
            
            showNotification('Checking credentials...', 'info');
            
            try {
                // Send login request to Google Apps Script
                const response = await fetch(LOGIN_API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: `email=${encodeURIComponent(email)}&password=${encodeURIComponent(password)}`
                });
                
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                
                const responseText = await response.text();
                let result;
                
                try {
                    result = JSON.parse(responseText);
                } catch (e) {
                    console.error('JSON parse error:', e);
                    throw new Error('Invalid server response');
                }
                
                if (result.success) {
                    // Login successful
                    currentUser = {
                        email: email,
                        name: result.name || email.split('@')[0],
                        role: result.role || "user",
                        hasPurchased: result.purchased || false,
                        status: result.status || "active"
                    };
                    
                    // Save to localStorage
                    localStorage.setItem('decodexmarket_current_user', JSON.stringify(currentUser));
                    
                    // Update local users list
                    const localUsers = JSON.parse(localStorage.getItem('decodexmarket_users') || '[]');
                    const userIndex = localUsers.findIndex(u => u.email === email);
                    
                    if (userIndex === -1) {
                        localUsers.push({
                            email: email,
                            password: password,
                            name: result.name || email.split('@')[0],
                            role: result.role || "user",
                            hasPurchased: result.purchased || false,
                            status: result.status || "active"
                        });
                    } else {
                        localUsers[userIndex] = {
                            ...localUsers[userIndex],
                            name: result.name || email.split('@')[0],
                            role: result.role || "user",
                            hasPurchased: result.purchased || false,
                            status: result.status || "active"
                        };
                    }
                    
                    localStorage.setItem('decodexmarket_users', JSON.stringify(localUsers));
                    
                    showMainApp();
                    showNotification(`Welcome back, ${currentUser.name}!`, 'success');
                    
                } else {
                    // Login failed - check reason
                    if (result.message && result.message.toLowerCase().includes("inactive")) {
                        showNotification('Account is inactive. Please contact admin.', 'error');
                    } else {
                        // Check local storage as fallback
                        const localUsers = JSON.parse(localStorage.getItem('decodexmarket_users') || '[]');
                        const localUser = localUsers.find(u => u.email === email && u.password === password);
                        
                        if (localUser && localUser.status !== "inactive") {
                            currentUser = localUser;
                            localStorage.setItem('decodexmarket_current_user', JSON.stringify(currentUser));
                            showMainApp();
                            showNotification(`Welcome back, ${currentUser.name}!`, 'success');
                        } else {
                            showNotification(result.message || 'Invalid email or password!', 'error');
                        }
                    }
                }
                
            } catch (error) {
                console.error('Login error:', error);
                
                // Fallback to local storage
                const localUsers = JSON.parse(localStorage.getItem('decodexmarket_users') || '[]');
                const localUser = localUsers.find(u => u.email === email && u.password === password);
                
                if (localUser && localUser.status !== "inactive") {
                    currentUser = localUser;
                    localStorage.setItem('decodexmarket_current_user', JSON.stringify(currentUser));
                    showMainApp();
                    showNotification(`Welcome back, ${currentUser.name}!`, 'success');
                } else {
                    showNotification('Cannot connect to server. Please try again later.', 'error');
                }
            }
        }

        // Admin login function
        function loginAdmin() {
            const id = document.getElementById('adminEmail').value;
            const password = document.getElementById('adminPassword').value;
            
            if (id === ADMIN_CREDENTIALS.id && password === ADMIN_CREDENTIALS.password) {
                currentUser = {
                    email: ADMIN_CREDENTIALS.id,
                    name: "Admin Ravi",
                    role: "admin",
                    hasPurchased: true,
                    status: "active"
                };
                localStorage.setItem('decodexmarket_current_user', JSON.stringify(currentUser));
                showMainApp();
                showNotification('Welcome, Admin Ravi!', 'success');
            } else {
                showNotification('Invalid admin credentials!', 'error');
            }
        }

        function showMainApp() {
            document.getElementById('loginOverlay').style.display = 'none';
            document.getElementById('mainApp').style.display = 'block';
            
            // Update user info in new header
            updateUserInfo();
            
            // Update admin-only visibility in footer
            if (currentUser && currentUser.role === "admin") {
                document.querySelectorAll('.footer-links .admin-only').forEach(item => {
                    item.style.display = 'block';
                });
            }
            
            // Load premium content based on user access
            loadPremiumContent();
            
            // Initialize dashboard
            fetchData();
            
            // Initialize new header functionality
            initializeNewHeader();
            
            // Initialize footer navigation
            initializeFooterNavigation();
            
            // Check for hash in URL AFTER main app is shown
            setTimeout(() => {
                handleInitialHash();
            }, 100);
        }

        function updateUserInfo() {
            const userNameEl = document.getElementById('userName');
            const userRoleEl = document.getElementById('userRole');
            const mobileUserName = document.getElementById('mobileUserName');
            const mobileUserRole = document.getElementById('mobileUserRole');
            const mobileAvatarIcon = document.getElementById('mobileAvatarIcon');
            
            if (currentUser) {
                // Update header user info
                userNameEl.textContent = currentUser.name;
                userRoleEl.textContent = currentUser.role === "admin" ? "Admin" : "User";
                
                // Update mobile user info
                mobileUserName.textContent = currentUser.name;
                
                // Update role badge and icon based on user role
                let roleDisplay = '';
                let iconClass = '';
                
                if (currentUser.role === "admin") {
                    roleDisplay = "Administrator";
                    iconClass = "fas fa-user-shield";
                    
                    // Show admin-only menu items
                    document.querySelectorAll('.admin-only').forEach(item => {
                        item.style.display = 'flex';
                    });
                } else if (currentUser.hasPurchased) {
                    roleDisplay = "Premium User";
                    iconClass = "fas fa-crown";
                    
                    // Hide admin-only menu items for non-admin users
                    document.querySelectorAll('.admin-only').forEach(item => {
                        item.style.display = 'none';
                    });
                } else {
                    roleDisplay = "Standard User";
                    iconClass = "fas fa-user";
                    
                    // Hide admin-only menu items for non-admin users
                    document.querySelectorAll('.admin-only').forEach(item => {
                        item.style.display = 'none';
                    });
                }
                
                mobileUserRole.textContent = roleDisplay;
                mobileAvatarIcon.className = iconClass;
            }
        }

        function logout() {
            currentUser = null;
            localStorage.removeItem('decodexmarket_current_user');
            document.getElementById('loginOverlay').style.display = 'flex';
            document.getElementById('mainApp').style.display = 'none';
            showNotification('Logged out successfully!', 'info');
            
            // Clear login forms
            document.getElementById('userEmail').value = '';
            document.getElementById('userPassword').value = '';
            document.getElementById('adminEmail').value = '';
            document.getElementById('adminPassword').value = '';
            
            // Close mobile menu if open
            closeMenu();
        }

        // ===== FIXED: HANDLE INITIAL HASH IN URL =====
        function handleInitialHash() {
            // Check if there's a hash in the URL
            const hash = window.location.hash;
            
            if (hash && hash !== '#home') {
                // Extract page name from hash (remove the #)
                const page = hash.substring(1);
                
                // Check if it's a valid page
                const validPages = ['home', 'gann', 'links', 'contact', 'timecycles', 'disclaimer', 'privacy', 'terms', 'oi', 'premium'];
                
                if (validPages.includes(page)) {
                    // Navigate to the correct page
                    setActivePage(page);
                    return true;
                }
            }
            
            // Default to home page
            return false;
        }

        // ===== NEW HEADER FUNCTIONALITY =====
        function initializeNewHeader() {
            // DOM Elements for new header
            const logoButton = document.querySelector('.logo-section');
            const headerRefreshButton = document.getElementById('headerRefreshButton');
            const refreshButton = document.getElementById('refreshButton');
            const logoutButton = document.getElementById('logoutButton');
            const mobileLogoutButton = document.getElementById('mobileLogoutButton');
            const menuToggle = document.getElementById('menuToggle');
            const mobileMenu = document.getElementById('mobileMenu');
            const menuIcon = document.getElementById('menuIcon');
            const navButtons = document.querySelectorAll('.mobile-menu .nav-button');
            
            // Header refresh button (new one in logo section)
            if (headerRefreshButton) {
                headerRefreshButton.addEventListener('click', handleManualRefresh);
            }
            
            // Original refresh button
            if (refreshButton) {
                refreshButton.addEventListener('click', handleManualRefresh);
            }
            
            // Logo section click - go to home
            if (logoButton) {
                logoButton.addEventListener('click', () => {
                    setActivePage('home');
                    closeMenu();
                });
            }
            
            // Logout buttons
            if (logoutButton) {
                logoutButton.addEventListener('click', logout);
            }
            if (mobileLogoutButton) {
                mobileLogoutButton.addEventListener('click', logout);
            }
            
            // Menu toggle
            if (menuToggle) {
                menuToggle.addEventListener('click', toggleMenu);
            }
            
            // Navigation buttons in mobile menu
            navButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const page = button.getAttribute('data-page');
                    
                    // Special handling for premium indicators
                    if (page === 'premium') {
                        window.location.href = 'indicators.html';
                        return;
                    }
                    
                    // Special handling for OI page
                    if (page === 'oi') {
                        window.location.href = 'oi.html';
                        return;
                    }
                    
                    // Handle overview page
                    if (page === 'overview') {
                        window.location.href = 'overview.html';
                        return;
                    }
                    
                    // Handle other pages in index.html
                    setActivePage(page);
                    closeMenu();  
                });
            });

            // Add specific event listener for premium indicators button if exists
            const premiumButton = document.getElementById('premiumIndicatorsButton');
            if (premiumButton) {
                premiumButton.addEventListener('click', () => {
                    window.location.href = 'indicators.html';
                    closeMenu();
                });
            }
            
            // Close menu when clicking outside
            document.addEventListener('click', function(event) {
                const mobileMenu = document.getElementById('mobileMenu');
                const menuToggle = document.getElementById('menuToggle');
                
                if (mobileMenu && mobileMenu.classList.contains('open') && 
                    !mobileMenu.contains(event.target) && 
                    !menuToggle.contains(event.target)) {
                    closeMenu();
                }
            });
            
            // Close menu with Escape key
            document.addEventListener('keydown', function(event) {
                if (event.key === 'Escape') {
                    closeMenu();
                }
            });
            
            // Don't set active page here - let handleInitialHash handle it
        }

        // Toggle mobile menu
        function toggleMenu() {
            const mobileMenu = document.getElementById('mobileMenu');
            const menuToggle = document.getElementById('menuToggle');
            const menuIcon = document.getElementById('menuIcon');
            
            if (mobileMenu && menuToggle && menuIcon) {
                const isOpen = mobileMenu.classList.contains('open');
                
                if (isOpen) {
                    mobileMenu.classList.remove('open');
                    menuToggle.classList.remove('active');
                    menuIcon.className = 'fas fa-bars';
                } else {
                    mobileMenu.classList.add('open');
                    menuToggle.classList.add('active');
                    menuIcon.className = 'fas fa-times';
                }
            }
        }

        // Close mobile menu
        function closeMenu() {
            const mobileMenu = document.getElementById('mobileMenu');
            const menuToggle = document.getElementById('menuToggle');
            const menuIcon = document.getElementById('menuIcon');
            
            if (mobileMenu && menuToggle && menuIcon) {
                mobileMenu.classList.remove('open');
                menuToggle.classList.remove('active');
                menuIcon.className = 'fas fa-bars';
            }
        }

        // Initialize footer navigation
        function initializeFooterNavigation() {
            const footerLinks = document.querySelectorAll('.footer-links .nav-link');
    
            footerLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    const page = this.getAttribute('data-page');
                    
                    // Special handling for premium indicators
                    if (page === 'premium') {
                        window.location.href = 'indicators.html';
                        return;
                    }
                    
                    e.preventDefault();
                    setActivePage(page);
                });
            });
        }

        // ===== FIXED: SET ACTIVE PAGE FUNCTION =====
        function setActivePage(page) {
            console.log('Setting active page:', page); // Debug log
            
            // Update navigation buttons in mobile menu
            const mobileNavButtons = document.querySelectorAll('.mobile-menu .nav-button');
            const footerLinks = document.querySelectorAll('.footer-links .nav-link');
            
            // Update mobile navigation buttons
            mobileNavButtons.forEach(button => {
                if (button.getAttribute('data-page') === page) {
                    button.classList.add('active');
                } else {
                    button.classList.remove('active');
                }
            });
            
            // Update footer links
            footerLinks.forEach(link => {
                if (link.getAttribute('data-page') === page) {
                    link.classList.add('active');
                } else {
                    link.classList.remove('active');
                }
            });
            
            // Hide all pages first
            document.querySelectorAll('.page-content').forEach(p => {
                p.classList.remove('active');
            });
            
            // Show selected page
            const pageElement = document.getElementById(`${page}Page`);
            if (pageElement) {
                pageElement.classList.add('active');
                console.log('Showing page:', pageElement.id); // Debug log
            } else {
                console.log('Page element not found:', `${page}Page`); // Debug log
            }
            
            // Load content for premium pages
            if (page === 'premium' || page === 'timecycles' || page === 'oi' || page === 'links') {
                loadPremiumContent();
            }
            
            // Initialize Gann Calculator if on that page
            if (page === 'gann') {
                setTimeout(initializeGannCalculator, 100);
            }
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
            
            // Update browser history WITHOUT forcing #home
            // Only update if the hash is different from current
            if (window.location.hash !== `#${page}`) {
                history.pushState({ page: page }, '', `#${page}`);
            }
        }

        // Handle refresh with new header style
        function handleManualRefresh() {
            const refreshButton = document.getElementById('refreshButton');
            const headerRefreshButton = document.getElementById('headerRefreshButton');
            const lastUpdateEl = document.getElementById('lastUpdate');
            
            if (!refreshButton && !headerRefreshButton) return;
            
            // Disable both refresh buttons if one is already refreshing
            if (refreshButton && refreshButton.classList.contains('refreshing')) return;
            if (headerRefreshButton && headerRefreshButton.classList.contains('refreshing')) return;
            
            // Add refreshing class to both buttons
            if (refreshButton) {
                refreshButton.classList.add('refreshing');
                refreshButton.innerHTML = '<i class="fas fa-spinner"></i>';
            }
            if (headerRefreshButton) {
                headerRefreshButton.classList.add('refreshing');
                headerRefreshButton.innerHTML = '<i class="fas fa-spinner"></i>';
            }
            
            // Fetch new data
            fetchData().then((success) => {
                setTimeout(() => {
                    // Remove refreshing class from both buttons
                    if (refreshButton) {
                        refreshButton.classList.remove('refreshing');
                        refreshButton.innerHTML = '<i class="fas fa-sync-alt"></i>';
                    }
                    if (headerRefreshButton) {
                        headerRefreshButton.classList.remove('refreshing');
                        headerRefreshButton.innerHTML = '<i class="fas fa-sync-alt"></i>';
                    }
                    
                    // Update last updated time
                    if (success && lastUpdateEl) {
                        const now = new Date();
                        lastUpdateEl.textContent = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                    }
                    
                    if (success) {
                        showNotification('Data refreshed successfully!', 'success');
                    }
                }, 500);
            });
        }

        // ===== OPTIMIZED NAVIGATION SYSTEM =====
        function initializeNavigation() {
            // Tab switching
            document.querySelectorAll('.login-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    
                    document.querySelectorAll('.login-tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    document.querySelectorAll('.login-form').forEach(form => form.classList.remove('active'));
                    document.getElementById(`${tabId}LoginForm`).classList.add('active');
                });
            });
            
            // Handle browser back/forward - FIXED
            window.addEventListener('popstate', function(event) {
                console.log('Popstate event:', event.state); // Debug log
                if (event.state && event.state.page) {
                    setActivePage(event.state.page);
                } else if (window.location.hash) {
                    const page = window.location.hash.substring(1);
                    setActivePage(page);
                }
            });
            
            // Listen for hash changes - FIXED
            window.addEventListener('hashchange', function() {
                const hash = window.location.hash;
                if (hash) {
                    const page = hash.substring(1);
                    setActivePage(page);
                }
            });
        }

        // ===== PREMIUM CONTENT SYSTEM =====
        function loadPremiumContent() {
            if (!currentUser) return;
            
            const isAdmin = currentUser.role === 'admin';
            const hasPurchased = currentUser.hasPurchased || isAdmin;
            
            // Premium Indicators Page
            const premiumContent = document.getElementById('premiumContent');
            if (hasPurchased) {
                premiumContent.innerHTML = `
                    <div class="features-grid">
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <h3>Advanced RSI</h3>
                            <p>Custom RSI indicators with divergence detection and multi-timeframe analysis</p>
                        </div>
                        
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-wave-square"></i>
                            </div>
                            <h3>Volume Profile</h3>
                            <p>Market profile analysis with value area and point of control identification</p>
                        </div>
                        
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-bullseye"></i>
                            </div>
                            <h3>Fibonacci Tools</h3>
                            <p>Advanced Fibonacci retracement, extension, and projection tools</p>
                        </div>
                        
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-project-diagram"></i>
                            </div>
                            <h3>Market Structure</h3>
                            <p>Automated market structure detection and trend analysis</p>
                        </div>
                    </div>
                `;
            } else {
                premiumContent.innerHTML = `
                    <div class="premium-message">
                        <h3><i class="fas fa-lock"></i> Premium Content Locked</h3>
                        <p>You need to purchase access to view premium indicators. This content is available to users who have purchased the premium package.</p>
                        <button class="premium-btn" onclick="showPurchaseLink()">
                            <i class="fas fa-shopping-cart"></i> Purchase Access
                        </button>
                        <div class="purchase-link" id="purchaseLink">
                            <p>Purchase Link: <a href="https://decodemarket.com/premium-access" target="_blank">https://decodemarket.com/premium-access</a></p>
                        </div>
                    </div>
                `;
            }
            
            // Time Cycles Page
            const timecyclesContent = document.getElementById('timecyclesContent');
            if (hasPurchased) {
                timecyclesContent.innerHTML = `
                    <div class="features-grid">
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-star"></i>
                            </div>
                            <h3>Gann Analysis</h3>
                            <p>Gann square, angles, and time cycles for precise market timing</p>
                        </div>
                        
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-moon"></i>
                            </div>
                            <h3>Lunar Cycles</h3>
                            <p>Lunar phase analysis and its correlation with market movements</p>
                        </div>
                        
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-sun"></i>
                            </div>
                            <h3>Solar Returns</h3>
                            <p>Solar and planetary cycles for long-term market forecasting</p>
                        </div>
                        
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-calendar-alt"></i>
                            </div>
                            <h3>Seasonal Patterns</h3>
                            <p>Historical seasonal patterns and calendar-based market tendencies</p>
                        </div>
                    </div>
                `;
            } else {
                timecyclesContent.innerHTML = `
                    <div class="premium-message">
                        <h3><i class="fas fa-lock"></i> Premium Content Locked</h3>
                        <p>You need to purchase access to view time cycles and astro analysis. This content is available to users who have purchased the premium package.</p>
                        <button class="premium-btn" onclick="showPurchaseLink()">
                            <i class="fas fa-shopping-cart"></i> Purchase Access
                        </button>
                        <div class="purchase-link" id="purchaseLink2">
                            <p>Purchase Link: <a href="https://decodemarket.com/premium-access" target="_blank">https://decodemarket.com/premium-access</a></p>
                        </div>
                    </div>
                `;
            }
            
            // Useful Links Page
            const linksContent = document.getElementById('linksContent');
            if (hasPurchased) {
                linksContent.innerHTML = `
                    <div class="features-grid">
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-chart-bar"></i>
                            </div>
                            <h3>Market Data</h3>
                            <p><a href="https://www.nseindia.com" target="_blank">NSE India</a> | <a href="https://www.bseindia.com" target="_blank">BSE India</a> | <a href="https://finance.yahoo.com" target="_blank">Yahoo Finance</a></p>
                        </div>
                        
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-tools"></i>
                            </div>
                            <h3>Trading Tools</h3>
                            <p><a href="https://www.tradingview.com" target="_blank">TradingView</a> | <a href="https://www.tdameritrade.com/tools-and-platforms/thinkorswim.page" target="_blank">Thinkorswim</a> | <a href="https://www.metatrader4.com" target="_blank">MetaTrader</a></p>
                        </div>
                        
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-book"></i>
                            </div>
                            <h3>Educational Resources</h3>
                            <p><a href="https://www.investopedia.com" target="_blank">Investopedia</a> | <a href="https://www.babypips.com" target="_blank">BabyPips</a> | <a href="https://www.tradingpsychology.com" target="_blank">Trading Psychology</a></p>
                        </div>
                        
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-newspaper"></i>
                            </div>
                            <h3>Market News</h3>
                            <p><a href="https://www.bloomberg.com" target="_blank">Bloomberg</a> | <a href="https://www.reuters.com" target="_blank">Reuters</a> | <a href="https://economictimes.indiatimes.com" target="_blank">Economic Times</a></p>
                        </div>
                    </div>
                `;
            } else {
                linksContent.innerHTML = `
                    <div class="premium-message">
                        <h3><i class="fas fa-lock"></i> Premium Content Locked</h3>
                        <p>You need to purchase access to view useful links and resources. This content is available to users who have purchased the premium package.</p>
                        <button class="premium-btn" onclick="showPurchaseLink()">
                            <i class="fas fa-shopping-cart"></i> Purchase Access
                        </button>
                        <div class="purchase-link" id="purchaseLink3">
                            <p>Purchase Link: <a href="https://decodemarket.com/premium-access" target="_blank">https://decodemarket.com/premium-access</a></p>
                        </div>
                    </div>
                `;
            }
        }

        function showPurchaseLink() {
            // Show all purchase links
            document.querySelectorAll('.purchase-link').forEach(link => {
                link.classList.add('active');
            });
        }

        // ===== GANN CALCULATOR =====
        function initializeGannCalculator() {
            const priceInput = document.getElementById('priceInput');
            const calculateBtn = document.getElementById('calculateBtn');
            const output = document.getElementById('output');
            const rec = document.getElementById('rec');
            const resBody = document.getElementById('resBody');
            const suppBody = document.getElementById('suppBody');
            
            if (!calculateBtn) return;
            
            // Clear previous event listeners
            calculateBtn.replaceWith(calculateBtn.cloneNode(true));
            const newCalculateBtn = document.getElementById('calculateBtn');
            
            newCalculateBtn.addEventListener('click', calculateGannLevels);
            
            // Allow Enter key to trigger calculation
            if (priceInput) {
                priceInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        calculateGannLevels();
                    }
                });
                
                // Set example price on load
                priceInput.value = "150.50";
            }
            
            function calculateGannLevels() {
                const price = parseFloat(priceInput.value);
                
                // Validate input
                if (isNaN(price) || price <= 0) { 
                    showNotification('Please enter a valid positive price.', 'error');
                    priceInput.focus();
                    return;
                }
                
                // Calculate square root of the price
                const root = Math.sqrt(price);
                
                // Clear previous results
                resBody.innerHTML = '';
                suppBody.innerHTML = '';
                output.style.display = 'block';
                
                // Degrees used in Gann Square of 9
                const degrees = [15, 30, 45, 60, 90, 120, 150, 180, 225, 270, 315, 360];
                
                // Calculate Resistance
                degrees.forEach(deg => {
                    const price = Math.pow(root + (deg / 180), 2);
                    resBody.innerHTML += `<tr><td>${deg}</td><td>${price.toFixed(2)}</td></tr>`;
                });
                
                // Calculate Support
                degrees.forEach(deg => {
                    const price = Math.pow(root - (deg / 180), 2);
                    if(price > 0) {
                        suppBody.innerHTML += `<tr><td>${deg}</td><td>${price.toFixed(2)}</td></tr>`;
                    }
                });
                
                // Trade Logic (Standard Gann Rule)
                const buyAbove = Math.pow(root + (15 / 180), 2).toFixed(2);
                const sellBelow = Math.pow(root - (15 / 180), 2).toFixed(2);
                
                rec.innerHTML = 
                    `<span class="gann-buy-zone">BUY ABOVE: ${buyAbove}</span> | 
                    <span class="gann-sell-zone">SELL BELOW: ${sellBelow}</span>`;
                
                // Scroll to results
                output.scrollIntoView({ behavior: 'smooth', block: 'start' });
                
                showNotification('Gann levels calculated successfully!', 'success');
            }
        }

        // ===== DASHBOARD DATA SYSTEM =====
        const MARKET_SHEET_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQgqBUGz6xFmT2Pd5qdvTZGYm3H3d-KgZlL65PHanPKDz3b9mp1rx7ZQNlV8BUJnYY0nfk-jyYvjWNY/pub?gid=658749771&single=true&output=csv";

        // Sample data
        const sampleData = {
            date: "Thursday, 25 January 2024",
            prediction: "Market May Go Up",
            participants: [
                { name: "Client", value: "1500", view: "Bullish" },
                { name: "DII", value: "1200", view: "Bullish" },
                { name: "FII", value: "-800", view: "Bearish" },
                { name: "Pro", value: "500", view: "Neutral" }
            ],
            resistance: ["25128", "25208", "25288", "25367", "25447", "25526", "25606", "25686"],
            support: ["24800", "24720", "24640", "24560", "24480", "24400", "24320", "24240"],
            reversal15min: ["22", "17", "14", "12", "", "", "", ""],
            reversal5min: ["65", "52", "43", "37", "32", "29", "26", "23"],
            globalMarkets: [
                { name: "Gift Nifty (Singapore)", price: "25,111", change: "+0.45%" },
                { name: "S&P 500 (USA)", price: "6,915", change: "-0.23%" },
                { name: "Nasdaq (USA)", price: "23,501", change: "+0.67%" },
                { name: "Dow Jones (USA)", price: "49,098", change: "+0.34%" },
                { name: "Nikkei 225 (Japan)", price: "53,846", change: "-0.12%" },
                { name: "DAX 40 (Germany)", price: "24,900", change: "+0.78%" },
                { name: "FTSE 100 (U.K)", price: "10,143", change: "+0.56%" }
            ],
            globalSentiment: "Bullish",
            indiaVix: "14.1",
            maxUpside: "0.7%",
            minDownside: "-0.5%"
        };

        // DOM Elements for data
        const currentDateEl = document.getElementById('currentDate');
        const finalPredictionEl = document.getElementById('finalPrediction');
        const participantsDataEl = document.getElementById('participantsData');
        const resistanceLevelsEl = document.getElementById('resistanceLevels');
        const supportLevelsEl = document.getElementById('supportLevels');
        const reversals15minTableBody = document.querySelector('#reversals15minTable tbody');
        const reversals5minTableBody = document.querySelector('#reversals5minTable tbody');
        const globalMarketEl = document.getElementById('globalMarket');
        const globalSentimentEl = document.getElementById('globalSentiment');
        const indiaVixEl = document.getElementById('indiaVix');
        const maxUpsideEl = document.getElementById('maxUpside');
        const minDownsideEl = document.getElementById('minDownside');
        const lastUpdateEl = document.getElementById('lastUpdate');

        // Parse CSV
        function parseCSV(csvText) {
            const rows = [];
            const lines = csvText.split('\n');
            
            lines.forEach(line => {
                if (line.trim()) {
                    const row = [];
                    let inQuotes = false;
                    let currentValue = '';
                    
                    for (let i = 0; i < line.length; i++) {
                        const char = line[i];
                        const nextChar = line[i + 1];
                        
                        if (char === '"' && inQuotes && nextChar === '"') {
                            currentValue += '"';
                            i++;
                        } else if (char === '"') {
                            inQuotes = !inQuotes;
                        } else if (char === ',' && !inQuotes) {
                            row.push(currentValue);
                            currentValue = '';
                        } else {
                            currentValue += char;
                        }
                    }
                    
                    row.push(currentValue);
                    rows.push(row);
                }
            });
            
            return rows;
        }

        async function fetchData() {
            try {
                showLoading(true);
                
                const response = await fetch(MARKET_SHEET_URL);
                if (!response.ok) throw new Error('Network response was not ok');
                
                const csvText = await response.text();
                const rows = parseCSV(csvText);
                
                if (rows.length > 0) {
                    updateDashboardFromSheet(rows);
                    
                    // Update last updated time
                    if (lastUpdateEl) {
                        const now = new Date();
                        lastUpdateEl.textContent = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                    }
                } else {
                    throw new Error("No data received");
                }
                
                return true;
            } catch (error) {
                console.error('Error fetching data:', error);
                showNotification("Using sample data", "warning");
                updateWithSampleData();
                return false;
            } finally {
                showLoading(false);
            }
        }

        // Update dashboard from Google Sheets data
        function updateDashboardFromSheet(rows) {
            // Date from cell A3:A4
            if (rows[2] && rows[2][0]) {
                const dateValue = rows[2][0];
                const timeValue = rows[3] && rows[3][0] ? rows[3][0] : '';
                if (currentDateEl) {
                    currentDateEl.innerHTML = `${dateValue}<br><small style="color: var(--gray);">${timeValue}</small>`;
                }
            } else {
                const yesterday = new Date();
                yesterday.setDate(yesterday.getDate() - 1);
                if (currentDateEl) {
                    currentDateEl.textContent = yesterday.toLocaleDateString('en-IN', {
                        weekday: 'long',
                        day: 'numeric',
                        month: 'long',
                        year: 'numeric'
                    });
                }
            }
            
            // Prediction from D1:E2
            if (rows[0] && (rows[0][3] || rows[0][4]) && finalPredictionEl) {
                const prediction = (rows[0][3] || rows[0][4]).trim();
                finalPredictionEl.textContent = prediction;
                
                if (prediction.toLowerCase().includes('up') || prediction.toLowerCase().includes('bull')) {
                    finalPredictionEl.style.color = '#10b981';
                } else if (prediction.toLowerCase().includes('down') || prediction.toLowerCase().includes('bear')) {
                    finalPredictionEl.style.color = '#f43f5e';
                }
            }
            
            // Participants data from A7:A10 (names) and B7:B10 (values)
            updateParticipants(rows.slice(6, 10));
            
            // Support from A14:A21 and Resistance from B14:B21
            updateLevels(rows.slice(13, 21));
            
            // Reversal bars: 15min from D8:D21, 5min from E8:E21
            updateReversals(rows.slice(7, 21));
            
            // Global markets: names G7:G13, prices H7:H13, changes J7:J13
            updateGlobalMarkets(rows.slice(6, 13));
            
            // Global sentiment from I14:J14
            updateGlobalSentiment(rows.slice(13, 14));
            
            // India VIX from H16 and ranges from I17:J17
            updateVixData(rows.slice(15, 18));
        }

        // Update participants data
        function updateParticipants(participantRows) {
            if (!participantsDataEl) return;
            
            participantsDataEl.innerHTML = '';
            
            participantRows.forEach(row => {
                if (row[0] && row[1]) {
                    const viewColor = getViewColor(row[1]);
                    
                    const item = document.createElement('div');
                    item.className = 'participant-item';
                    item.innerHTML = `
                        <div class="participant-label">${row[0]}</div>
                        <div class="participant-value" style="color: ${viewColor}">${row[1]}</div>
                        <div class="participant-view">View: ${row[1]}</div>
                    `;
                    participantsDataEl.appendChild(item);
                }
            });
        }

        // Helper function to get color based on view
        function getViewColor(view) {
            const viewStr = (view || '').toString().toLowerCase();
            if (viewStr.includes('bull') || viewStr.includes('buy') || viewStr.includes('positive')) {
                return '#10b981';
            } else if (viewStr.includes('bear') || viewStr.includes('sell') || viewStr.includes('negative')) {
                return '#f43f5e';
            } else {
                return '#f39c12';
            }
        }

        // Update support/resistance levels
        function updateLevels(levelRows) {
            if (!resistanceLevelsEl || !supportLevelsEl) return;
            
            resistanceLevelsEl.innerHTML = '';
            supportLevelsEl.innerHTML = '';
            
            levelRows.forEach(row => {
                // Resistance from column B (index 1)
                if (row[1] && resistanceLevelsEl) {
                    const resLi = document.createElement('li');
                    resLi.className = 'resistance-level';
                    resLi.textContent = row[1];
                    resistanceLevelsEl.appendChild(resLi);
                }
                
                // Support from column A (index 0)
                if (row[0] && supportLevelsEl) {
                    const supLi = document.createElement('li');
                    supLi.className = 'support-level';
                    supLi.textContent = row[0];
                    supportLevelsEl.appendChild(supLi);
                }
            });
        }

        // Update reversals data
        function updateReversals(reversalRows) {
            if (!reversals15minTableBody || !reversals5minTableBody) return;
            
            reversals15minTableBody.innerHTML = '';
            reversals5minTableBody.innerHTML = '';
            
            // Update 15min table from column D (index 3)
            reversalRows.forEach(row => {
                const tr15 = document.createElement('tr');
                tr15.innerHTML = `<td>${row[3] || ''}</td>`;
                reversals15minTableBody.appendChild(tr15);
            });
            
            // Update 5min table from column E (index 4)
            reversalRows.forEach(row => {
                const tr5 = document.createElement('tr');
                tr5.innerHTML = `<td>${row[4] || ''}</td>`;
                reversals5minTableBody.appendChild(tr5);
            });
        }

        // Update global markets
        function updateGlobalMarkets(globalRows) {
            if (!globalMarketEl) return;
            
            globalMarketEl.innerHTML = '';
            
            for (let i = 0; i < 7; i++) {
                const row = globalRows[i];
                if (row && row[6]) {
                    const marketName = row[6];
                    const marketPrice = row[7] || 'N/A';
                    const marketChange = row[9] || '0%';
                    
                    const changeNum = parseFloat(marketChange) || 0;
                    const changeClass = changeNum >= 0 ? 'change-up' : 'change-down';
                    const changeSymbol = changeNum >= 0 ? '+' : '';
                    
                    const item = document.createElement('div');
                    item.className = 'global-item';
                    item.innerHTML = `
                        <div class="global-name">${marketName}</div>
                        <div class="global-value">${marketPrice}</div>
                        <div class="global-change ${changeClass}">${changeSymbol}${marketChange.includes('%') ? marketChange : marketChange + '%'}</div>
                    `;
                    globalMarketEl.appendChild(item);
                }
            }
        }

        // Update global sentiment
        function updateGlobalSentiment(sentimentRows) {
            if (!globalSentimentEl) return;
            
            if (sentimentRows[0]) {
                const sentiment = sentimentRows[0][8] || sentimentRows[0][9] || 'Neutral';
                globalSentimentEl.textContent = sentiment;
                
                const sentimentStr = sentiment.toLowerCase();
                if (sentimentStr.includes('bull') || sentimentStr.includes('positive') || sentimentStr.includes('up')) {
                    globalSentimentEl.style.color = '#10b981';
                } else if (sentimentStr.includes('bear') || sentimentStr.includes('negative') || sentimentStr.includes('down')) {
                    globalSentimentEl.style.color = '#f43f5e';
                } else {
                    globalSentimentEl.style.color = '#f39c12';
                }
            }
        }

        // Update India VIX data
        function updateVixData(vixRows) {
            if (vixRows[0] && vixRows[0][7] && indiaVixEl) {
                indiaVixEl.textContent = vixRows[0][7];
            }
            
            if (vixRows[1] && vixRows[1][8] && maxUpsideEl) {
                maxUpsideEl.textContent = vixRows[1][8];
            }
            
            if (vixRows[1] && vixRows[1][9] && minDownsideEl) {
                minDownsideEl.textContent = vixRows[1][9];
            }
        }

        // Fallback to sample data
        function updateWithSampleData() {
            if (currentDateEl) {
                currentDateEl.textContent = sampleData.date;
            }
            
            if (finalPredictionEl) {
                finalPredictionEl.textContent = sampleData.prediction;
                finalPredictionEl.style.color = '#10b981';
            }
            
            if (participantsDataEl) {
                participantsDataEl.innerHTML = '';
                sampleData.participants.forEach(p => {
                    const viewColor = getViewColor(p.view);
                    
                    const item = document.createElement('div');
                    item.className = 'participant-item';
                    item.innerHTML = `
                        <div class="participant-label">${p.name}</div>
                        <div class="participant-value" style="color: ${viewColor}">${p.value}</div>
                        <div class="participant-view">View: ${p.view}</div>
                    `;
                    participantsDataEl.appendChild(item);
                });
            }
            
            if (resistanceLevelsEl && supportLevelsEl) {
                resistanceLevelsEl.innerHTML = '';
                supportLevelsEl.innerHTML = '';
                
                sampleData.resistance.forEach(level => {
                    const li = document.createElement('li');
                    li.className = 'resistance-level';
                    li.textContent = level;
                    resistanceLevelsEl.appendChild(li);
                });
                
                sampleData.support.forEach(level => {
                    const li = document.createElement('li');
                    li.className = 'support-level';
                    li.textContent = level;
                    supportLevelsEl.appendChild(li);
                });
            }
            
            if (reversals15minTableBody && reversals5minTableBody) {
                reversals15minTableBody.innerHTML = '';
                reversals5minTableBody.innerHTML = '';
                
                sampleData.reversal15min.forEach(bars => {
                    const tr15 = document.createElement('tr');
                    tr15.innerHTML = `<td>${bars}</td>`;
                    reversals15minTableBody.appendChild(tr15);
                });
                
                sampleData.reversal5min.forEach(bars => {
                    const tr5 = document.createElement('tr');
                    tr5.innerHTML = `<td>${bars}</td>`;
                    reversals5minTableBody.appendChild(tr5);
                });
            }
            
            if (globalMarketEl) {
                globalMarketEl.innerHTML = '';
                sampleData.globalMarkets.forEach(market => {
                    const changeClass = market.change.startsWith('+') ? 'change-up' : 'change-down';
                    
                    const item = document.createElement('div');
                    item.className = 'global-item';
                    item.innerHTML = `
                        <div class="global-name">${market.name}</div>
                        <div class="global-value">${market.price}</div>
                        <div class="global-change ${changeClass}">${market.change}</div>
                    `;
                    globalMarketEl.appendChild(item);
                });
            }
            
            if (globalSentimentEl) {
                globalSentimentEl.textContent = sampleData.globalSentiment;
                globalSentimentEl.style.color = '#10b981';
            }
            
            if (indiaVixEl && maxUpsideEl && minDownsideEl) {
                indiaVixEl.textContent = sampleData.indiaVix;
                maxUpsideEl.textContent = sampleData.maxUpside;
                minDownsideEl.textContent = sampleData.minDownside;
            }
        }

        // Show loading state
        function showLoading(show) {
            const cards = document.querySelectorAll('.card, .date-card, .prediction-card');
            cards.forEach(card => {
                if (show) {
                    card.classList.add('loading');
                } else {
                    card.classList.remove('loading');
                }
            });
        }

        // Notification system
        function showNotification(message, type = "success") {
            document.querySelectorAll('.notification').forEach(n => n.remove());
            
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.style.cssText = `
                position: fixed;
                top: 90px;
                right: 20px;
                background: ${type === 'error' ? '#f43f5e' : type === 'warning' ? '#f39c12' : '#10b981'};
                color: white;
                padding: 15px 25px;
                border-radius: 12px;
                z-index: 10000;
                box-shadow: 0 5px 15px rgba(0,0,0,0.3);
                animation: slideIn 0.3s ease;
                backdrop-filter: blur(10px);
                border: 1px solid rgba(255,255,255,0.2);
                max-width: 300px;
                font-weight: 600;
            `;
            notification.innerHTML = `
                <i class="fas fa-${type === 'error' ? 'exclamation-triangle' : type === 'warning' ? 'exclamation-circle' : 'check-circle'}"></i> 
                ${message}
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => {
                    if (notification.parentNode) {
                        document.body.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // Add CSS animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        // ===== INITIALIZATION =====
        document.addEventListener('DOMContentLoaded', () => {
            initializeUsers();
            initializeNavigation();
            
            // Auto-refresh every 5 minutes
            setInterval(fetchData, 5 * 60 * 1000);
        });
    </script>
</body>
</html>
